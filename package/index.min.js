!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("@angular/core"),require("@angular/common"),require("@angular/material")):"function"==typeof define&&define.amd?define("@firestitch/file",["@angular/core","@angular/common","@angular/material"],t):"object"==typeof exports?exports["@firestitch/file"]=t(require("@angular/core"),require("@angular/common"),require("@angular/material")):e["@firestitch/file"]=t(e["@angular/core"],e["@angular/common"],e["@angular/material"])}("undefined"!=typeof self?self:this,function(e,t,n){return function(e){function t(i){if(n[i])return n[i].exports;var o=n[i]={i:i,l:!1,exports:{}};return e[i].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var n={};return t.m=e,t.c=n,t.d=function(e,n,i){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:i})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s="./index.ts")}({"../node_modules/@firestitch/common/common.umd.js":function(e,t,n){!function(e,i){i(t,n("@angular/core"),n("@angular/common"))}(0,function(e,t,n){"use strict";var i=function(){function e(){}return e.prototype.nameValue=function(e,t,n){var i=[];if(t||n){var o="function"==typeof t?t:function(e){return e[t]},r="function"==typeof n?n:function(e){return e[n]};e.forEach(function(e){i.push({name:o(e),value:r(e)})})}else e.forEach(function(e,t){i.push({name:e,value:t})});return i},e.prototype.remove=function(e,t){var n=this.indexOf(e,t);return n>=0?e.splice(n,1):n},e.prototype.indexOf=function(e,t){var n=this;if("function"!=typeof t){var i=t;t=function(e){return n.compare(i,e)}}for(var o=0,r=e.length;o<r;o++)if(t(e[o]))return o;return-1},e.prototype.compare=function(e,t){var n=!0;for(var i in e)n=n&&t[i]==e[i];return n},e.prototype.filter=function(e,t){var n=this;if("function"!=typeof t){var i=t;t=function(e){return n.compare(i,e)}}var o=Array.isArray(e),r=o?[]:{};return o?e.forEach(function(e,n){t(e)&&r.push(e)}):Object.keys(e).forEach(function(n){t(e[n])&&(r[n]=e[n])}),r},e.prototype.index=function(e,t){var n={};return e.forEach(function(e,i){n[e[t]]=e}),n},e.prototype.sort=function(e,t,n){if(void 0===n&&(n=!1),"function"!=typeof t){var i=t;t=function(e,t){if(n){if(e[i]<t[i])return 1;if(e[i]>t[i])return-1}else{if(e[i]>t[i])return 1;if(e[i]<t[i])return-1}return 0}}return e.sort(t),e},e.prototype.rsort=function(e,t){return this.sort(e,t,!0)},e.prototype.list=function(e,t,n){void 0===n&&(n=null);var i=n?{}:[];return e.forEach(function(e,o){n?i[e[n]]=e[t]:i.push(e[t])}),i},e.prototype.applyDepth=function(e,t,n,i){void 0===n&&(n="id"),void 0===i&&(i="depth");var o={};return e.forEach(function(e){e[t]||(e[i]=0),o[e[n]]=e}),Object.keys(o).forEach(function(e){Object.keys(o).forEach(function(e){o[e][i]||o[e][t]&&(o[e][i]=o[o[e][t]][i]+1)})}),o},e.prototype.inArray=function(e,t){Array.isArray(e)||(e=[e]);for(var n=0,i=e.length;n<i;n++)if(t.indexOf(e[n])>=0)return!0;return!1},e.prototype.keyExists=function(e,t){return e.hasOwnProperty(t)},e.prototype.length=function(e){return e.length},e.prototype.ksort=function(e){Object.keys(e).sort().forEach(function(t){var n=e[t];delete e[t],e[t]=n})},e.decorators=[{type:t.Injectable}],e.ctorParameters=function(){return[]},e}(),o=function(){function e(){}return e.prototype.round=function(e,t){t=t||0;var n=Math.pow(10,t),i=e*n;return Math.round(i)/n},e.decorators=[{type:t.Injectable}],e.ctorParameters=function(){return[]},e}(),r=function(){function e(){this.intervals={}}return e.prototype.guid=function(e){return e=e||"xxxxxx",e.replace(/[xy]/g,function(e){var t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)})},e.prototype.uuid=function(){return this.guid("xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx")},e.prototype.resolve=function(e,t){void 0===t&&(t=[]);var n=t;return new Promise(function(t){e.then(function(e){Object.keys(e).forEach(function(t){return n[t]=e[t]}),t(n)})})},e.prototype.int=function(e){return e=parseInt(e),isNaN(e)&&(e=0),e},e.prototype.float=function(e){return e=parseFloat(e),isNaN(e)&&(e=0),e},e.prototype.string=function(e){return null!==e&&void 0!==e||(e=""),e.toString()},e.prototype.isEmpty=function(e,t){return t=t||{},void 0===e||null===e||!1===e||""===e||!this.string(e).length||this.isObject(e)&&"Object"===e.constructor.name&&!Object.keys(e).length||!t.zero&&(0===e||"0"===e)},e.prototype.isInt=function(e,t){return!!this.string(e).match(/^\d+$/)&&(!t||Number.isInteger(e))},e.prototype.each=function(e,t){(this.isArray(e)||this.isObject(e))&&Object.keys(e).forEach(function(n){t(e[n],n)})},e.prototype.isObject=function(e){return null!==e&&"object"==typeof e&&!this.isArray(e)},e.prototype.isString=function(e){return"string"==typeof e||e instanceof String},e.prototype.isArray=function(e){return e instanceof Array},e.prototype.isNumeric=function(e){return this.string(e).length&&!!this.string(e).match(/^-?\d*\.?\d*$/)},e.prototype.isClass=function(e,t){if(this.isObject(e))if(this.isString(t)){if(e.constructor&&e.constructor.name===t)return!0}else if(e instanceof t)return!0;return!1},e.prototype.isBoolean=function(e){return!0===e||!1===e},e.prototype.value=function(e,t,n){return(this.isObject(e)||this.isArray(e))&&e.hasOwnProperty(t)?e[t]:n},e.prototype.interval=function(e,t,n){var i=setInterval(e,t);return n&&(this.intervals[n]=i),function(){window.clearInterval(i)}},e.prototype.clearInterval=function(e){var t=this.intervals[e];t&&window.clearInterval(t)},e.prototype.throttle=function(e,t){var n=!1;return function(){n||(e.apply(null,arguments),n=!0,setTimeout(function(){n=!1},t))}},e.prototype.debounce=function(e,t,n){var i;return function(){var o=this,r=arguments,a=function(){i=null,n||e.apply(o,r)},s=n&&!i;clearTimeout(i),i=setTimeout(a,t),s&&e.apply(o,r)}},e.prototype.length=function(e){return this.isObject(e)?Object.keys(e).length:this.isArray(e)?e.length:0},e.prototype.boolean=function(e){return"false"!==this.string(e).toLowerCase()&&!!e},e.prototype.stringify=function(e){return JSON.stringify(e)},e.decorators=[{type:t.Injectable}],e.ctorParameters=function(){return[]},e}(),a=function(){function e(e){this.fsUtil=e}return e.prototype.phone=function(e){return/^[\+]?[(]?[0-9]{3}[)]?[-\s\.]?[0-9]{3}[-\s\.]?[0-9]{4,6}$/.test(e)||!String(e).length},e.prototype.email=function(e){return!!this.fsUtil.string(e).match(/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/)},e.decorators=[{type:t.Injectable}],e.ctorParameters=function(){return[{type:r}]},e}(),s=function(){function e(e){this.FsUtil=e}return e.prototype.transform=function(e){return this.FsUtil.stringify(e)},e.decorators=[{type:t.Pipe,args:[{name:"fsUtilStringify"}]}],e.ctorParameters=function(){return[{type:r}]},e}(),l=function(){function e(e){this.FsUtil=e}return e.prototype.transform=function(){return this.FsUtil.guid()},e.decorators=[{type:t.Pipe,args:[{name:"fsUtilGuid"}]}],e.ctorParameters=function(){return[{type:r}]},e}(),c=function(){function e(){}return e.forRoot=function(){return{ngModule:e,providers:[i,r,o,a]}},e.decorators=[{type:t.NgModule,args:[{imports:[n.CommonModule],declarations:[s,l],providers:[i,r,o,a],exports:[s,l]}]}],e.ctorParameters=function(){return[]},e}();e.FsCommonModule=c,e.FsUtilStringifyPipe=s,e.FsUtilGuidPipe=l,e.KEY_CANCEL=3,e.KEY_HELP=6,e.KEY_BACKSPACE=8,e.KEY_TAB=9,e.KEY_CLEAR=12,e.KEY_RETURN=13,e.KEY_ENTER=14,e.KEY_SHIFT=16,e.KEY_CONTROL=17,e.KEY_ALT=18,e.KEY_PAUSE=19,e.KEY_CAPS_LOCK=20,e.KEY_ESCAPE=27,e.KEY_SPACE=32,e.KEY_PAGE_UP=33,e.KEY_PAGE_DOWN=34,e.KEY_END=35,e.KEY_HOME=36,e.KEY_LEFT=37,e.KEY_UP=38,e.KEY_RIGHT=39,e.KEY_DOWN=40,e.KEY_PRINTSCREEN=44,e.KEY_INSERT=45,e.KEY_DELETE=46,e.KEY_0=48,e.KEY_1=49,e.KEY_2=50,e.KEY_3=51,e.KEY_4=52,e.KEY_5=53,e.KEY_6=54,e.KEY_7=55,e.KEY_8=56,e.KEY_9=57,e.KEY_SEMICOLON=59,e.KEY_EQUALS=61,e.FsUtil=r,e.FsArray=i,e.FsMath=o,e.FsValidate=a,Object.defineProperty(e,"__esModule",{value:!0})})},'../node_modules/css-loader/index.js?{"sourceMap":true}!../node_modules/postcss-loader/lib/index.js?{"sourceMap":true}!../node_modules/resolve-url-loader/index.js?{"sourceMap":true}!../node_modules/sass-loader/lib/loader.js?{"sourceMap":true}!./components/fs-file-picker/fs-file-picker.component.scss':function(e,t,n){t=e.exports=n("../node_modules/css-loader/lib/css-base.js")(!0),t.push([e.i,':host.dragover .select {\n  border: 2px #07a8e6 dashed;\n  color: #07a8e6;\n}\n\n:host.dragover .select button {\n  display: none;\n}\n\n:host.dragover .select .mat-icon {\n  color: #07a8e6;\n}\n\n:host.dragover ::ng-deep .preview-container:after {\n  content: "";\n  width: 98%;\n  display: block;\n  height: 98%;\n  position: absolute;\n  left: 0;\n  top: 0;\n  border: 2px #07a8e6 dashed;\n  background: #07a8e6;\n  opacity: 0.4;\n}\n\n.select {\n  text-align: center;\n  border: 1px solid #ddd;\n  border-radius: 3px;\n  width: 150px;\n  height: 150px;\n  display: table-cell;\n  vertical-align: middle;\n  padding: 10px;\n  -webkit-box-pack: center;\n      -ms-flex-pack: center;\n          justify-content: center;\n  -webkit-box-orient: vertical;\n  -webkit-box-direction: normal;\n      -ms-flex-direction: column;\n          flex-direction: column;\n  -webkit-box-sizing: border-box;\n          box-sizing: border-box;\n}\n\n.select mat-icon {\n  -webkit-transform: scale(1.8);\n          transform: scale(1.8);\n  color: #ddd;\n}\n\n.instruction {\n  font-size: 12px;\n  padding: 8px 0;\n}\n\n.label {\n  -webkit-transform: scale(0.75) translateZ(0.001px);\n          transform: scale(0.75) translateZ(0.001px);\n  -webkit-transform-origin: 0 0;\n          transform-origin: 0 0;\n}\n\n',"",{version:3,sources:["/Users/Basters/dev/firestitch/fs-file/src/components/fs-file-picker/src/components/fs-file-picker/fs-file-picker.component.scss","/Users/Basters/dev/firestitch/fs-file/fs-file-picker.component.scss"],names:[],mappings:"AAAA;EAGM,2BAAA;EACA,eAAA;CCDL;;ADHD;EAOQ,cAAA;CCAP;;ADPD;EAWQ,eAAA;CCAP;;ADXD;EAiBU,YAAA;EACA,WAAA;EACA,eAAA;EACA,YAAA;EACA,mBAAA;EACA,QAAA;EACA,OAAA;EACA,2BAAA;EACA,oBAAA;EACA,aAAA;CCFT;;ADSD;EACE,mBAAA;EACA,uBAAA;EACA,mBAAA;EACA,aAAA;EACA,cAAA;EACA,oBAAA;EACA,uBAAA;EACA,cAAA;EACA,yBAAA;MAAA,sBAAA;UAAA,wBAAA;EACA,6BAAA;EAAA,8BAAA;MAAA,2BAAA;UAAA,uBAAA;EACA,+BAAA;UAAA,uBAAA;CCND;;ADLD;EAeI,8BAAA;UAAA,sBAAA;EACA,YAAA;CCNH;;ADUD;EACE,gBAAA;EACA,eAAA;CCPD;;ADUD;EACE,mDAAA;UAAA,2CAAA;EACA,8BAAA;UAAA,sBAAA;CCPD",file:"fs-file-picker.component.scss",sourcesContent:[':host {\n  &.dragover {\n    .select {\n      border: 2px #07a8e6 dashed;\n      color: #07a8e6;\n\n      button {\n        display: none;\n      }\n\n      .mat-icon {\n        color: #07a8e6;\n      }\n    }\n    ::ng-deep {\n      .preview-container {\n        &:after {\n          content: "";\n          width: 98%;\n          display: block;\n          height: 98%;\n          position: absolute;\n          left: 0;\n          top: 0;\n          border: 2px #07a8e6 dashed;\n          background: #07a8e6;\n          opacity: 0.4;\n        }\n      }\n    }\n  }\n}\n\n.select {\n  text-align: center;\n  border: 1px solid #ddd;\n  border-radius: 3px;\n  width: 150px;\n  height: 150px;\n  display: table-cell;\n  vertical-align: middle;\n  padding: 10px;\n  justify-content: center;\n  flex-direction: column;\n  box-sizing: border-box;\n\n\n  mat-icon {\n    transform: scale(1.8);\n    color: #ddd;\n  }\n}\n\n.instruction {\n  font-size: 12px;\n  padding: 8px 0;\n}\n\n.label {\n  transform: scale(.75) translateZ(.001px);\n  transform-origin: 0 0;\n}\n',':host.dragover .select {\n  border: 2px #07a8e6 dashed;\n  color: #07a8e6;\n}\n\n:host.dragover .select button {\n  display: none;\n}\n\n:host.dragover .select .mat-icon {\n  color: #07a8e6;\n}\n\n:host.dragover ::ng-deep .preview-container:after {\n  content: "";\n  width: 98%;\n  display: block;\n  height: 98%;\n  position: absolute;\n  left: 0;\n  top: 0;\n  border: 2px #07a8e6 dashed;\n  background: #07a8e6;\n  opacity: 0.4;\n}\n\n.select {\n  text-align: center;\n  border: 1px solid #ddd;\n  border-radius: 3px;\n  width: 150px;\n  height: 150px;\n  display: table-cell;\n  vertical-align: middle;\n  padding: 10px;\n  justify-content: center;\n  flex-direction: column;\n  box-sizing: border-box;\n}\n\n.select mat-icon {\n  transform: scale(1.8);\n  color: #ddd;\n}\n\n.instruction {\n  font-size: 12px;\n  padding: 8px 0;\n}\n\n.label {\n  transform: scale(0.75) translateZ(0.001px);\n  transform-origin: 0 0;\n}\n\n'],sourceRoot:""}])},'../node_modules/css-loader/index.js?{"sourceMap":true}!../node_modules/postcss-loader/lib/index.js?{"sourceMap":true}!../node_modules/resolve-url-loader/index.js?{"sourceMap":true}!../node_modules/sass-loader/lib/loader.js?{"sourceMap":true}!./components/fs-file-preview/fs-file-preview.component.scss':function(e,t,n){t=e.exports=n("../node_modules/css-loader/lib/css-base.js")(!0),t.push([e.i,".file-ext {\n  font-weight: bold;\n  text-align: center;\n  text-transform: uppercase;\n  padding: 15px 0;\n  font-size: 25px;\n}\n\n.file-name {\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  padding: 0 5px;\n  font-size: 12px;\n  text-align: center;\n}\n\n.actions {\n  position: absolute;\n  display: none;\n  width: 100%;\n  height: 100%;\n  top: 0;\n  left: 0;\n  background: rgba(0, 0, 0, .5);\n}\n\n.actions .action {\n  position: absolute;\n  cursor: pointer;\n}\n\n.actions .action.top-left {\n  top: 5%;\n  right: 5%;\n}\n\n.actions .action.top-right {\n  top: 5%;\n  right: 5%;\n}\n\n.actions .action.bottom-left {\n  bottom: 5%;\n  left: 5%;\n}\n\n.actions .action.bottom-right {\n  bottom: 5%;\n  right: 5%;\n}\n\n.actions .action.mat-mini-fab {\n  width: 22%;\n  height: 22%;\n  min-width: 30px;\n  min-height: 30px;\n  max-width: 42px;\n  max-height: 42px;\n  line-height: 15px !important;\n}\n\n.actions .action.mat-mini-fab .mat-button-wrapper {\n  padding: 4px 0;\n  line-height: 15px !important;\n}\n\n:host:hover .file-name {\n  overflow: visible;\n  white-space: normal;\n  word-wrap: break-word;\n}\n\n:host.preview {\n  display: inline-block;\n  position: relative;\n  margin-right: 10px;\n  border: 1px #DDD solid;\n  vertical-align: top;\n  border-radius: 3px;\n}\n\n:host.preview:last-child {\n  margin-right: 0;\n}\n\n:host.preview:hover .actions {\n  display: block;\n}\n\n:host.preview img {\n  display: block;\n  border-radius: 3px;\n}\n\n:host ::ng-deep .mat-button-wrapper {\n  padding: 0;\n  line-height: 15px !important;\n}\n\n:host ::ng-deep .spinner {\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  margin-left: -25%;\n  margin-top: -25%;\n}\n\n@media only screen and (max-width: 550px) {\n  .actions {\n    display: block;\n    background: none;\n  }\n}\n\n","",{version:3,sources:["/Users/Basters/dev/firestitch/fs-file/src/components/fs-file-preview/src/components/fs-file-preview/fs-file-preview.component.scss","/Users/Basters/dev/firestitch/fs-file/fs-file-preview.component.scss"],names:[],mappings:"AAAA;EACE,kBAAA;EACA,mBAAA;EACA,0BAAA;EACA,gBAAA;EACA,gBAAA;CCCD;;ADED;EACE,oBAAA;EACA,iBAAA;EACA,wBAAA;EACA,eAAA;EACA,gBAAA;EACA,mBAAA;CCCD;;ADED;EACE,mBAAA;EACA,cAAA;EACA,YAAA;EACA,aAAA;EACA,OAAA;EACA,QAAA;EACA,8BAAA;CCCD;;ADRD;EAWI,mBAAA;EACA,gBAAA;CCCH;;ADbD;EAeM,QAAA;EACA,UAAA;CCEL;;ADTC;EAWI,QAAA;EACA,UAAA;CCEL;;ADvBD;EAyBM,WAAA;EACA,SAAA;CCEL;;ADnBC;EAqBI,WAAA;EACA,UAAA;CCEL;;ADjCD;EAmCM,WAAA;EACA,YAAA;EACA,gBAAA;EACA,iBAAA;EACA,gBAAA;EACA,iBAAA;EACA,6BAAA;CCEL;;AD3CD;EA4CQ,eAAA;EACA,6BAAA;CCGP;;ADIS;EACN,kBAAA;EACA,oBAAA;EACA,sBAAA;CCDH;;ADHD;EAQI,sBAAA;EACA,mBAAA;EACA,mBAAA;EACA,uBAAA;EACA,oBAAA;EACA,mBAAA;CCDH;;ADGG;EACE,gBAAA;CCAL;;ADIK;EACE,eAAA;CCDP;;ADKG;EACE,eAAA;EACA,mBAAA;CCFL;;ADQD;EAEI,WAAA;EACA,6BAAA;CCNH;;ADSC;EACE,mBAAA;EACA,SAAA;EACA,UAAA;EACA,kBAAA;EACA,iBAAA;CCNH;;ADUD;EACE;IACI,eAAA;IACA,iBAAA;GCPH;CACF",file:"fs-file-preview.component.scss",sourcesContent:[".file-ext {\n  font-weight: bold;\n  text-align: center;\n  text-transform: uppercase;\n  padding: 15px 0;\n  font-size: 25px;\n}\n\n.file-name {\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  padding: 0 5px;\n  font-size: 12px;\n  text-align: center;\n}\n\n.actions {\n  position: absolute;\n  display: none;\n  width: 100%;\n  height: 100%;\n  top: 0;\n  left: 0;\n  background: rgba(0, 0, 0, 0.5);\n\n  .action {\n\n    position: absolute;\n    cursor: pointer;\n\n    &.top-left {\n      top: 5%;\n      right: 5%;\n    }\n\n    &.top-right {\n      top: 5%;\n      right: 5%;\n    }\n\n    &.bottom-left {\n      bottom: 5%;\n      left: 5%;\n    }\n\n    &.bottom-right {\n      bottom: 5%;\n      right: 5%;\n    }\n\n    &.mat-mini-fab {\n      width: 22%;\n      height: 22%;\n      min-width: 30px;\n      min-height: 30px;\n      max-width: 42px;\n      max-height: 42px;\n      line-height: 15px !important;\n\n      .mat-button-wrapper {\n        padding: 4px 0;\n        line-height: 15px !important;\n      }\n    }\n  }\n}\n\n:host {\n  &:hover .file-name {\n    overflow: visible;\n    white-space: normal;\n    word-wrap: break-word;\n  }\n\n  &.preview {\n    display: inline-block;\n    position: relative;\n    margin-right: 10px;\n    border: 1px #DDD solid;\n    vertical-align: top;\n    border-radius: 3px;\n\n    &:last-child {\n      margin-right: 0;\n    }\n\n    &:hover {\n      .actions {\n        display: block;\n      }\n    }\n\n    img {\n      display: block;\n      border-radius: 3px;\n    }\n  }\n\n}\n\n:host ::ng-deep {\n  .mat-button-wrapper {\n    padding: 0;\n    line-height: 15px !important;\n  }\n\n  .spinner {\n    position: absolute;\n    top: 50%;\n    left: 50%;\n    margin-left: -25%;\n    margin-top: -25%;\n  }\n}\n\n@media only screen and (max-width: 550px) {\n  .actions {\n      display: block;\n      background: none;\n  }\n}\n",".file-ext {\n  font-weight: bold;\n  text-align: center;\n  text-transform: uppercase;\n  padding: 15px 0;\n  font-size: 25px;\n}\n\n.file-name {\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  padding: 0 5px;\n  font-size: 12px;\n  text-align: center;\n}\n\n.actions {\n  position: absolute;\n  display: none;\n  width: 100%;\n  height: 100%;\n  top: 0;\n  left: 0;\n  background: rgba(0, 0, 0, 0.5);\n}\n\n.actions .action {\n  position: absolute;\n  cursor: pointer;\n}\n\n.actions .action.top-left {\n  top: 5%;\n  right: 5%;\n}\n\n.actions .action.top-right {\n  top: 5%;\n  right: 5%;\n}\n\n.actions .action.bottom-left {\n  bottom: 5%;\n  left: 5%;\n}\n\n.actions .action.bottom-right {\n  bottom: 5%;\n  right: 5%;\n}\n\n.actions .action.mat-mini-fab {\n  width: 22%;\n  height: 22%;\n  min-width: 30px;\n  min-height: 30px;\n  max-width: 42px;\n  max-height: 42px;\n  line-height: 15px !important;\n}\n\n.actions .action.mat-mini-fab .mat-button-wrapper {\n  padding: 4px 0;\n  line-height: 15px !important;\n}\n\n:host:hover .file-name {\n  overflow: visible;\n  white-space: normal;\n  word-wrap: break-word;\n}\n\n:host.preview {\n  display: inline-block;\n  position: relative;\n  margin-right: 10px;\n  border: 1px #DDD solid;\n  vertical-align: top;\n  border-radius: 3px;\n}\n\n:host.preview:last-child {\n  margin-right: 0;\n}\n\n:host.preview:hover .actions {\n  display: block;\n}\n\n:host.preview img {\n  display: block;\n  border-radius: 3px;\n}\n\n:host ::ng-deep .mat-button-wrapper {\n  padding: 0;\n  line-height: 15px !important;\n}\n\n:host ::ng-deep .spinner {\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  margin-left: -25%;\n  margin-top: -25%;\n}\n\n@media only screen and (max-width: 550px) {\n  .actions {\n    display: block;\n    background: none;\n  }\n}\n\n"],sourceRoot:""}])},'../node_modules/css-loader/index.js?{"sourceMap":true}!../node_modules/postcss-loader/lib/index.js?{"sourceMap":true}!../node_modules/resolve-url-loader/index.js?{"sourceMap":true}!../node_modules/sass-loader/lib/loader.js?{"sourceMap":true}!./components/fs-file-previews/fs-file-previews.component.scss':function(e,t,n){t=e.exports=n("../node_modules/css-loader/lib/css-base.js")(!0),t.push([e.i,".queue {\n  position: relative;\n  display: block;\n}\n\n","",{version:3,sources:["/Users/Basters/dev/firestitch/fs-file/src/components/fs-file-previews/src/components/fs-file-previews/fs-file-previews.component.scss","/Users/Basters/dev/firestitch/fs-file/fs-file-previews.component.scss"],names:[],mappings:"AAAA;EACE,mBAAA;EACA,eAAA;CCCD",file:"fs-file-previews.component.scss",sourcesContent:[".queue {\n  position: relative;\n  display: block;\n}\n",".queue {\n  position: relative;\n  display: block;\n}\n\n"],sourceRoot:""}])},"../node_modules/css-loader/lib/css-base.js":function(e,t){function n(e,t){var n=e[1]||"",o=e[3];if(!o)return n;if(t&&"function"==typeof btoa){var r=i(o);return[n].concat(o.sources.map(function(e){return"/*# sourceURL="+o.sourceRoot+e+" */"})).concat([r]).join("\n")}return[n].join("\n")}function i(e){return"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(e))))+" */"}e.exports=function(e){var t=[];return t.toString=function(){return this.map(function(t){var i=n(t,e);return t[2]?"@media "+t[2]+"{"+i+"}":i}).join("")},t.i=function(e,n){"string"==typeof e&&(e=[[null,e,""]]);for(var i={},o=0;o<this.length;o++){var r=this[o][0];"number"==typeof r&&(i[r]=!0)}for(o=0;o<e.length;o++){var a=e[o];"number"==typeof a[0]&&i[a[0]]||(n&&!a[2]?a[2]=n:n&&(a[2]="("+a[2]+") and ("+n+")"),t.push(a))}},t}},"../node_modules/fileapi/dist/FileAPI.js":function(e,t,n){var i,o;!function(e){"use strict";var t=e.HTMLCanvasElement&&e.HTMLCanvasElement.prototype,n=e.Blob&&function(){try{return Boolean(new Blob)}catch(e){return!1}}(),i=n&&e.Uint8Array&&function(){try{return 100===new Blob([new Uint8Array(100)]).size}catch(e){return!1}}(),o=e.BlobBuilder||e.WebKitBlobBuilder||e.MozBlobBuilder||e.MSBlobBuilder,r=(n||o)&&e.atob&&e.ArrayBuffer&&e.Uint8Array&&function(e){var t,r,a,s,l,c;for(t=e.split(",")[0].indexOf("base64")>=0?atob(e.split(",")[1]):decodeURIComponent(e.split(",")[1]),r=new ArrayBuffer(t.length),a=new Uint8Array(r),s=0;s<t.length;s+=1)a[s]=t.charCodeAt(s);return l=e.split(",")[0].split(":")[1].split(";")[0],n?new Blob([i?a:r],{type:l}):(c=new o,c.append(r),c.getBlob(l))};e.HTMLCanvasElement&&!t.toBlob&&(t.mozGetAsFile?t.toBlob=function(e,n,i){e(i&&t.toDataURL&&r?r(this.toDataURL(n,i)):this.mozGetAsFile("blob",n))}:t.toDataURL&&r&&(t.toBlob=function(e,t,n){e(r(this.toDataURL(t,n)))})),e.dataURLtoBlob=r}(window),function(e,t){"use strict";function n(e,t,n,i,o){var r={type:n.type||n,target:e,result:i};X(r,o),t(r)}function i(e){return C&&!!C.prototype["readAs"+e]}function o(e,o,r,a){if(te.isBlob(e)&&i(r)){var s=new C;V(s,q,function t(i){var r=i.type;"progress"==r?n(e,o,i,i.target.result,{loaded:i.loaded,total:i.total}):"loadend"==r?($(s,q,t),s=null):n(e,o,i,i.target.result)});try{a?s["readAs"+r](e,a):s["readAs"+r](e)}catch(i){n(e,o,"error",t,{error:i.toString()})}}else n(e,o,"error",t,{error:"filreader_not_support_"+r})}function r(e,t){if(!e.type&&(b||e.size%4096==0&&e.size<=102400))if(C)try{var n=new C;J(n,q,function(e){var i="error"!=e.type;i?(null!=n.readyState&&n.readyState!==n.LOADING||n.abort(),t(i)):t(!1,n.error)}),n.readAsDataURL(e)}catch(e){t(!1,e)}else t(null,new Error("FileReader is not supported"));else t(!0)}function a(e){return e&&(e.isFile||e.isDirectory)}function s(e){var t;return e.getAsEntry?t=e.getAsEntry():e.webkitGetAsEntry&&(t=e.webkitGetAsEntry()),t}function l(e,t){if(e)if(e.isFile)e.file(function(n){n.fullPath=e.fullPath,t(!1,[n],[n])},function(n){e.error=n,t("FileError.code: "+n.code,[],[e])});else if(e.isDirectory){var n=e.createReader(),i=!0,o=[],r=[e],a=function(n){e.error=n,t("DirectoryError.code: "+n.code,o,r)},c=function s(c){i&&(i=!1,c.length||(e.error=new Error("directory is empty"))),c.length?te.afor(c,function(e,t){l(t,function(t,i,l){t||(o=o.concat(i)),r=r.concat(l),e?e():n.readEntries(s,a)})}):t(!1,o,r)};n.readEntries(c,a)}else l(s(e),t);else{var p=new Error("invalid entry");e=new Object(e),e.error=p,t(p.message,[],[e])}}function c(e){var t={};return G(e,function(e,n){e&&"object"==typeof e&&void 0===e.nodeType&&(e=X({},e)),t[n]=e}),t}function p(e){return U.test(e&&e.tagName)}function u(e){return(e.originalEvent||e||"").dataTransfer||{}}function f(e){var t;for(t in e)if(e.hasOwnProperty(t)&&!(e[t]instanceof Object||"overlay"===t||"filter"===t))return!0;return!1}var d,m,h=1,g=function(){},y=e.document,v=y.doctype||{},A=e.navigator.userAgent,b=/safari\//i.test(A)&&!/chrome\//i.test(A),w=/iemobile\//i.test(A),x=!b&&/chrome\//i.test(A)&&"http:"===e.location.protocol,_=e.createObjectURL&&e||e.URL&&URL.revokeObjectURL&&URL||e.webkitURL&&webkitURL,F=e.Blob,E=e.File,C=e.FileReader,j=e.FormData,O=e.XMLHttpRequest,I=e.jQuery,P=!(!(E&&C&&(e.Uint8Array||j||O.prototype.sendAsBinary))||b&&/windows/i.test(A)&&!w),D=P&&"withCredentials"in new O,R=P&&!!F&&!!(F.prototype.webkitSlice||F.prototype.mozSlice||F.prototype.slice),k=(""+"".normalize).indexOf("[native code]")>0,B=e.dataURLtoBlob,T=/img/i,M=/canvas/i,S=/img|canvas/i,U=/input/i,z=/^data:[^,]+,/,L={}.toString,H=e.Math,N=function(t){return t=new e.Number(H.pow(1024,t)),t.from=function(e){return H.round(e*this)},t},W={},K=[],q="abort progress error load loadend",Y="status statusText readyState response responseXML responseText responseBody".split(" "),Q=function(e){return e&&"length"in e},G=function(e,t,n){if(e)if(Q(e))for(var i=0,o=e.length;i<o;i++)i in e&&t.call(n,e[i],i,e);else for(var r in e)e.hasOwnProperty(r)&&t.call(n,e[r],r,e)},X=function(e){for(var t=arguments,n=1,i=function(t,n){e[n]=t};n<t.length;n++)G(t[n],i);return e},V=function(e,t,n){if(e){var i=te.uid(e);W[i]||(W[i]={});var o=C&&e&&e instanceof C;G(t.split(/\s+/),function(t){I&&!o?I.event.add(e,t,n):(W[i][t]||(W[i][t]=[]),W[i][t].push(n),e.addEventListener?e.addEventListener(t,n,!1):e.attachEvent?e.attachEvent("on"+t,n):e["on"+t]=n)})}},$=function(e,t,n){if(e){var i=te.uid(e),o=W[i]||{},r=C&&e&&e instanceof C;G(t.split(/\s+/),function(t){if(I&&!r)I.event.remove(e,t,n);else{for(var i=o[t]||[],a=i.length;a--;)if(i[a]===n){i.splice(a,1);break}e.addEventListener?e.removeEventListener(t,n,!1):e.detachEvent?e.detachEvent("on"+t,n):e["on"+t]=null}})}},J=function(e,t,n){V(e,t,function i(o){$(e,t,i),n(o)})},Z=function(t){return t.target||(t.target=e.event&&e.event.srcElement||y),3===t.target.nodeType&&(t.target=t.target.parentNode),t},ee=function(e){var t=y.createElement("input");return t.setAttribute("type","file"),e in t},te={version:"2.0.25",cors:!1,html5:!0,media:!1,formData:!0,multiPassResize:!0,insecureChrome:x,debug:!1,pingUrl:!1,multiFlash:!1,flashAbortTimeout:0,withCredentials:!0,staticPath:"./dist/",flashUrl:0,flashImageUrl:0,postNameConcat:function(e,t){return e+(null!=t?"["+t+"]":"")},ext2mime:{jpg:"image/jpeg",tif:"image/tiff",txt:"text/plain"},accept:{"image/*":"art bm bmp dwg dxf cbr cbz fif fpx gif ico iefs jfif jpe jpeg jpg jps jut mcf nap nif pbm pcx pgm pict pm png pnm qif qtif ras rast rf rp svf tga tif tiff xbm xbm xpm xwd","audio/*":"m4a flac aac rm mpa wav wma ogg mp3 mp2 m3u mod amf dmf dsm far gdm imf it m15 med okt s3m stm sfx ult uni xm sid ac3 dts cue aif aiff wpl ape mac mpc mpp shn wv nsf spc gym adplug adx dsp adp ymf ast afc hps xs","video/*":"m4v 3gp nsv ts ty strm rm rmvb m3u ifo mov qt divx xvid bivx vob nrg img iso pva wmv asf asx ogm m2v avi bin dat dvr-ms mpg mpeg mp4 mkv avc vp3 svq3 nuv viv dv fli flv wpl"},uploadRetry:0,networkDownRetryTimeout:5e3,chunkSize:0,chunkUploadRetry:0,chunkNetworkDownRetryTimeout:2e3,KB:N(1),MB:N(2),GB:N(3),TB:N(4),EMPTY_PNG:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQIW2NkAAIAAAoAAggA9GkAAAAASUVORK5CYII=",expando:"fileapi"+(new Date).getTime(),uid:function(e){return e?e[te.expando]=e[te.expando]||te.uid():(++h,te.expando+h)},log:function(){te.debug&&d&&(m?console.log.apply(console,arguments):console.log([].join.call(arguments," ")))},newImage:function(e,t){var n=y.createElement("img");return t&&te.event.one(n,"error load",function(e){t("error"==e.type,n),n=null}),n.src=e,n},getXHR:function(){var t;if(O)t=new O;else if(e.ActiveXObject)try{t=new ActiveXObject("MSXML2.XMLHttp.3.0")}catch(e){t=new ActiveXObject("Microsoft.XMLHTTP")}return t},isArray:Q,support:{dnd:D&&"ondrop"in y.createElement("div"),cors:D,html5:P,chunked:R,dataURI:!0,accept:ee("accept"),multiple:ee("multiple")},event:{on:V,off:$,one:J,fix:Z},throttle:function(t,n){var i,o;return function(){o=arguments,i||(t.apply(e,o),i=setTimeout(function(){i=0,t.apply(e,o)},n))}},F:function(){},parseJSON:function(t){return e.JSON&&JSON.parse?JSON.parse(t):new Function("return ("+t.replace(/([\r\n])/g,"\\$1")+");")()},trim:function(e){return e=String(e),e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")},defer:function(){var e,n,i=[],o={resolve:function(t,r){for(o.resolve=g,n=t||!1,e=r;r=i.shift();)r(n,e)},then:function(o){n!==t?o(n,e):i.push(o)}};return o},queue:function(e){var t=0,n=0,i=!1,o=!1,r={inc:function(){n++},next:function(){t++,setTimeout(r.check,0)},check:function(){t>=n&&!i&&r.end()},isFail:function(){return i},fail:function(){!i&&e(i=!0)},end:function(){o||(o=!0,e())}};return r},each:G,afor:function(e,t){var n=0,i=e.length;Q(e)&&i--?function o(){t(i!=n&&o,e[n],n++)}():t(!1)},extend:X,isFile:function(e){return"[object File]"===L.call(e)},isBlob:function(e){return this.isFile(e)||"[object Blob]"===L.call(e)},isCanvas:function(e){return e&&M.test(e.nodeName)},getFilesFilter:function(e){return e="string"==typeof e?e:e.getAttribute&&e.getAttribute("accept")||"",e?new RegExp("("+e.replace(/\./g,"\\.").replace(/,/g,"|")+")$","i"):/./},readAsDataURL:function(e,t){te.isCanvas(e)?n(e,t,"load",te.toDataURL(e)):o(e,t,"DataURL")},readAsBinaryString:function(e,t){i("BinaryString")?o(e,t,"BinaryString"):o(e,function(e){if("load"==e.type)try{e.result=te.toBinaryString(e.result)}catch(t){e.type="error",e.message=t.toString()}t(e)},"DataURL")},readAsArrayBuffer:function(e,t){o(e,t,"ArrayBuffer")},readAsText:function(e,t,n){n||(n=t,t="utf-8"),o(e,n,"Text",t)},toDataURL:function(e,t){return"string"==typeof e?e:e.toDataURL?e.toDataURL(t||"image/png"):void 0},toBinaryString:function(t){return e.atob(te.toDataURL(t).replace(z,""))},readAsImage:function(e,i,o){if(te.isBlob(e))if(_){var r=_.createObjectURL(e);r===t?n(e,i,"error"):te.readAsImage(r,i,o)}else te.readAsDataURL(e,function(t){"load"==t.type?te.readAsImage(t.result,i,o):(o||"error"==t.type)&&n(e,i,t,null,{loaded:t.loaded,total:t.total})});else if(te.isCanvas(e))n(e,i,"load",e);else if(T.test(e.nodeName))if(e.complete)n(e,i,"load",e);else{J(e,"error abort load",function t(o){"load"==o.type&&_&&_.revokeObjectURL(e.src),$(e,"error abort load",t),n(e,i,o,e)})}else if(e.iframe)n(e,i,{type:"error"});else{var a=te.newImage(e.dataURL||e);te.readAsImage(a,i,o)}},checkFileObj:function(e){var t={},n=te.accept;return"object"==typeof e?t=e:t.name=(e+"").split(/\\|\//g).pop(),null==t.type&&(t.type=t.name.split(".").pop()),G(n,function(e,n){e=new RegExp(e.replace(/\s/g,"|"),"i"),(e.test(t.type)||te.ext2mime[t.type])&&(t.type=te.ext2mime[t.type]||n.split("/")[0]+"/"+t.type)}),t},getDropFiles:function(e,t){var n,i=[],o=[],c=u(e),p=c.files,f=c.items,d=Q(f)&&f[0]&&s(f[0]),m=te.queue(function(){t(i,o)});if(d)if(k&&p){var h,g,y=p.length;for(n=new Array(y);y--;){h=p[y];try{g=s(f[y])}catch(e){te.log("[err] getDropFiles: ",e),g=null}a(g)&&(g.isDirectory||g.isFile&&h.name==h.name.normalize("NFC"))?n[y]=g:n[y]=h}}else n=f;else n=p;G(n||[],function(e){m.inc();try{d&&a(e)?l(e,function(e,t,n){e?te.log("[err] getDropFiles:",e):i.push.apply(i,t),o.push.apply(o,n),m.next()}):r(e,function(t,n){t?i.push(e):e.error=n,o.push(e),m.next()})}catch(e){m.next(),te.log("[err] getDropFiles: ",e)}}),m.check()},getFiles:function(e,t,n){var i=[];return n?(te.filterFiles(te.getFiles(e),t,n),null):(e.jquery&&(e.each(function(){i=i.concat(te.getFiles(this))}),e=i,i=[]),"string"==typeof t&&(t=te.getFilesFilter(t)),
e.originalEvent?e=Z(e.originalEvent):e.srcElement&&(e=Z(e)),e.dataTransfer?e=e.dataTransfer:e.target&&(e=e.target),e.files?(i=e.files,P||(i[0].blob=e,i[0].iframe=!0)):!P&&p(e)?te.trim(e.value)&&(i=[te.checkFileObj(e.value)],i[0].blob=e,i[0].iframe=!0):Q(e)&&(i=e),te.filter(i,function(e){return!t||t.test(e.name)}))},getTotalSize:function(e){for(var t=0,n=e&&e.length;n--;)t+=e[n].size;return t},getInfo:function(e,t){var n={},i=K.concat();te.isBlob(e)?function o(){var r=i.shift();r?r.test(e.type)?r(e,function(e,i){e?t(e):(X(n,i),o())}):o():t(!1,n)}():t("not_support_info",n)},addInfoReader:function(e,t){t.test=function(t){return e.test(t)},K.push(t)},filter:function(e,t){for(var n,i=[],o=0,r=e.length;o<r;o++)o in e&&(n=e[o],t.call(n,n,o,e)&&i.push(n));return i},filterFiles:function(e,t,n){if(e.length){var i,o=e.concat(),r=[],a=[];!function e(){o.length?(i=o.shift(),te.getInfo(i,function(n,o){(t(i,!n&&o)?r:a).push(i),e()})):n(r,a)}()}else n([],e)},upload:function(e){e=X({jsonp:"callback",prepare:te.F,beforeupload:te.F,upload:te.F,fileupload:te.F,fileprogress:te.F,filecomplete:te.F,progress:te.F,complete:te.F,pause:te.F,imageOriginal:!0,chunkSize:te.chunkSize,chunkUploadRetry:te.chunkUploadRetry,uploadRetry:te.uploadRetry},e),e.imageAutoOrientation&&!e.imageTransform&&(e.imageTransform={rotate:"auto"});var t,n=new te.XHR(e),i=this._getFilesDataArray(e.files),o=this,r=0,a=0,s=!1;return G(i,function(e){r+=e.size}),n.files=[],G(i,function(e){n.files.push(e.file)}),n.total=r,n.loaded=0,n.filesLeft=i.length,e.beforeupload(n,e),t=function(){var l=i.shift(),p=l&&l.file,u=!1,f=c(e);if(n.filesLeft=i.length,p&&p.name===te.expando&&(p=null,te.log("[warn] FileAPI.upload() â€” called without files")),("abort"!=n.statusText||n.current)&&l){if(s=!1,n.currentFile=p,p&&!1===e.prepare(p,f))return void t.call(o);f.file=p,o._getFormData(f,l,function(s){a||e.upload(n,e);var c=new te.XHR(X({},f,{upload:p?function(){e.fileupload(p,c,f)}:g,progress:p?function(t){u||(u=t.loaded===t.total,e.fileprogress({type:"progress",total:l.total=t.total,loaded:l.loaded=t.loaded},p,c,f),e.progress({type:"progress",total:r,loaded:n.loaded=a+l.size*(t.loaded/t.total)||0},p,c,f))}:g,complete:function(i){G(Y,function(e){n[e]=c[e]}),p&&(l.total=l.total||l.size,l.loaded=l.total,i||(this.progress(l),u=!0,a+=l.size,n.loaded=a),e.filecomplete(i,c,p,f)),setTimeout(function(){t.call(o)},0)}}));n.abort=function(e){e||(i.length=0),this.current=e,c.abort()},c.send(s)})}else{var d=200==n.status||201==n.status||204==n.status;e.complete(!d&&(n.statusText||"error"),n,e),s=!0}},setTimeout(t,0),n.append=function(e,a){e=te._getFilesDataArray([].concat(e)),G(e,function(e){r+=e.size,n.files.push(e.file),a?i.unshift(e):i.push(e)}),n.statusText="",s&&t.call(o)},n.remove=function(e){for(var t,n=i.length;n--;)i[n].file==e&&(t=i.splice(n,1),r-=t.size);return t},n},_getFilesDataArray:function(e){var t=[],n={};if(p(e)){var i=te.getFiles(e);n[e.name||"file"]=null!==e.getAttribute("multiple")?i:i[0]}else Q(e)&&p(e[0])?G(e,function(e){n[e.name||"file"]=te.getFiles(e)}):n=e;return G(n,function e(n,i){Q(n)?G(n,function(t){e(t,i)}):n&&(n.name||n.image)&&t.push({name:i,file:n,size:n.size,total:n.size,loaded:0})}),t.length||t.push({file:{name:te.expando}}),t},_getFormData:function(e,t,n){var i=t.file,o=t.name,r=i.name,a=i.type,s=te.support.transform&&e.imageTransform,l=new te.Form,c=te.queue(function(){n(l)}),p=s&&f(s),u=te.postNameConcat;G(e.data,function e(t,n){"object"==typeof t?G(t,function(t,i){e(t,u(n,i))}):l.append(n,t)}),function t(n){n.image?(c.inc(),n.toData(function(e,i){n.file&&(i.type=n.file.type,i.quality=n.matrix.quality,r=n.file&&n.file.name),r=r||(new Date).getTime()+".png",t(i),c.next()})):te.Image&&s&&(/^image/.test(n.type)||S.test(n.nodeName))?(c.inc(),p&&(s=[s]),te.Image.transform(n,s,e.imageAutoOrientation,function(t,i){if(p&&!t)B||te.flashEngine||(l.multipart=!0),l.append(o,i[0],r,s[0].type||a);else{var f=0;t||G(i,function(e,t){B||te.flashEngine||(l.multipart=!0),s[t].postName||(f=1),l.append(s[t].postName||u(o,t),e,r,s[t].type||a)}),(t||e.imageOriginal)&&l.append(u(o,f?"original":null),n,r,a)}c.next()})):r!==te.expando&&l.append(o,n,r)}(i),c.check()},reset:function(e,t){var n,i;return I?(i=I(e).clone(!0).insertBefore(e).val("")[0],t||I(e).remove()):(n=e.parentNode,i=n.insertBefore(e.cloneNode(!0),e),i.value="",t||n.removeChild(e),G(W[te.uid(e)],function(t,n){G(t,function(t){$(e,n,t),V(i,n,t)})})),i},load:function(e,t){var n=te.getXHR();return n?(n.open("GET",e,!0),n.overrideMimeType&&n.overrideMimeType("text/plain; charset=x-user-defined"),V(n,"progress",function(e){e.lengthComputable&&t({type:e.type,loaded:e.loaded,total:e.total},n)}),n.onreadystatechange=function(){if(4==n.readyState)if(n.onreadystatechange=null,200==n.status){e=e.split("/");var i={name:e[e.length-1],size:n.getResponseHeader("Content-Length"),type:n.getResponseHeader("Content-Type")};i.dataURL="data:"+i.type+";base64,"+te.encode64(n.responseBody||n.responseText),t({type:"load",result:i},n)}else t({type:"error"},n)},n.send(null)):t({type:"error"}),n},encode64:function(e){var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",n="",i=0;for("string"!=typeof e&&(e=String(e));i<e.length;){var o,r,a=255&e.charCodeAt(i++),s=255&e.charCodeAt(i++),l=255&e.charCodeAt(i++),c=a>>2,p=(3&a)<<4|s>>4;isNaN(s)?o=r=64:(o=(15&s)<<2|l>>6,r=isNaN(l)?64:63&l),n+=t.charAt(c)+t.charAt(p)+t.charAt(o)+t.charAt(r)}return n}};te.addInfoReader(/^image/,function(e,t){if(!e.__dimensions){var n=e.__dimensions=te.defer();te.readAsImage(e,function(e){var t=e.target;n.resolve("load"!=e.type&&"error",{width:t.width,height:t.height}),t.src=te.EMPTY_PNG,t=null})}e.__dimensions.then(t)}),te.event.dnd=function(e,t,n){var i,o;n||(n=t,t=te.F),C?(V(e,"dragenter dragleave dragover",t.ff=t.ff||function(e){for(var n=u(e).types,r=n&&n.length,a=!1;r--;)if(~n[r].indexOf("File")){e.preventDefault(),o!==e.type&&(o=e.type,"dragleave"!=o&&t.call(e.currentTarget,!0,e),a=!0);break}a&&(clearTimeout(i),i=setTimeout(function(){t.call(e.currentTarget,"dragleave"!=o,e)},50))}),V(e,"drop",n.ff=n.ff||function(e){e.preventDefault(),o=0,te.getDropFiles(e,function(t,i){n.call(e.currentTarget,t,i,e)}),t.call(e.currentTarget,!1,e)})):te.log("Drag'n'Drop -- not supported")},te.event.dnd.off=function(e,t,n){$(e,"dragenter dragleave dragover",t.ff),$(e,"drop",n.ff)},I&&!I.fn.dnd&&(I.fn.dnd=function(e,t){return this.each(function(){te.event.dnd(this,e,t)})},I.fn.offdnd=function(e,t){return this.each(function(){te.event.dnd.off(this,e,t)})}),e.FileAPI=X(te,e.FileAPI),te.log("FileAPI: "+te.version),te.log("protocol: "+e.location.protocol),te.log("doctype: ["+v.name+"] "+v.publicId+" "+v.systemId),G(y.getElementsByTagName("meta"),function(e){/x-ua-compatible/i.test(e.getAttribute("http-equiv"))&&te.log("meta.http-equiv: "+e.getAttribute("content"))});try{d=!!console.log,m=!!console.log.apply}catch(e){}te.flashUrl||(te.flashUrl=te.staticPath+"FileAPI.flash.swf"),te.flashImageUrl||(te.flashImageUrl=te.staticPath+"FileAPI.flash.image.swf"),te.flashWebcamUrl||(te.flashWebcamUrl=te.staticPath+"FileAPI.flash.camera.swf")}(window,void 0),function(e,t,n){"use strict";function i(t){if(t instanceof i){var n=new i(t.file);return e.extend(n.matrix,t.matrix),n}if(!(this instanceof i))return new i(t);this.file=t,this.size=t.size||100,this.matrix={sx:0,sy:0,sw:0,sh:0,dx:0,dy:0,dw:0,dh:0,resize:0,deg:0,quality:1,filter:0}}var o=Math.min,r=Math.round,a=function(){return t.createElement("canvas")},s=!1,l={8:270,3:180,6:90,7:270,4:180,5:90};try{s=a().toDataURL("image/png").indexOf("data:image/png")>-1}catch(e){}i.prototype={image:!0,constructor:i,set:function(t){return e.extend(this.matrix,t),this},crop:function(e,t,i,o){return i===n&&(i=e,o=t,e=t=0),this.set({sx:e,sy:t,sw:i,sh:o||i})},resize:function(e,t,n){return/min|max|height|width/.test(t)&&(n=t,t=e),this.set({dw:e,dh:t||e,resize:n})},preview:function(e,t){return this.resize(e,t||e,"preview")},rotate:function(e){return this.set({deg:e})},filter:function(e){return this.set({filter:e})},overlay:function(e){return this.set({overlay:e})},clone:function(){return new i(this)},_load:function(t,n){var i=this;/img|video/i.test(t.nodeName)?n.call(i,null,t):e.readAsImage(t,function(e){n.call(i,"load"!=e.type,e.result)})},_apply:function(t,n){var r,s=a(),l=this.getMatrix(t),c=s.getContext("2d"),p=t.videoWidth||t.width,u=t.videoHeight||t.height,f=l.deg,d=l.dw,m=l.dh,h=p,g=u,y=l.filter,v=t,A=l.overlay,b=e.queue(function(){t.src=e.EMPTY_PNG,n(!1,s)}),w=e.renderImageToCanvas;for(f-=360*Math.floor(f/360),t._type=this.file.type;l.multipass&&o(h/d,g/m)>2;)h=h/2+.5|0,g=g/2+.5|0,r=a(),r.width=h,r.height=g,v!==t?(w(r,v,0,0,v.width,v.height,0,0,h,g),v=r):(v=r,w(v,t,l.sx,l.sy,l.sw,l.sh,0,0,h,g),l.sx=l.sy=l.sw=l.sh=0);s.width=f%180?m:d,s.height=f%180?d:m,s.type=l.type,s.quality=l.quality,c.rotate(f*Math.PI/180),w(c.canvas,v,l.sx,l.sy,l.sw||v.width,l.sh||v.height,180==f||270==f?-d:0,90==f||180==f?-m:0,d,m),d=s.width,m=s.height,A&&e.each([].concat(A),function(t){b.inc();var n=new window.Image,i=function(){var o=0|t.x,r=0|t.y,a=t.w||n.width,s=t.h||n.height,l=t.rel;o=1==l||4==l||7==l?(d-a+o)/2:2==l||5==l||8==l?d-(a+o):o,r=3==l||4==l||5==l?(m-s+r)/2:l>=6?m-(s+r):r,e.event.off(n,"error load abort",i);try{c.globalAlpha=t.opacity||1,c.drawImage(n,o,r,a,s)}catch(e){}b.next()};e.event.on(n,"error load abort",i),n.src=t.src,n.complete&&i()}),y&&(b.inc(),i.applyFilter(s,y,b.next)),b.check()},getMatrix:function(t){var n=e.extend({},this.matrix),i=n.sw=n.sw||t.videoWidth||t.naturalWidth||t.width,a=n.sh=n.sh||t.videoHeight||t.naturalHeight||t.height,s=n.dw=n.dw||i,l=n.dh=n.dh||a,c=i/a,p=s/l,u=n.resize;if("preview"==u){if(s!=i||l!=a){var f,d;p>=c?(f=i,d=f/p):(d=a,f=d*p),f==i&&d==a||(n.sx=~~((i-f)/2),n.sy=~~((a-d)/2),i=f,a=d)}}else"height"==u?s=l*c:"width"==u?l=s/c:u&&(i>s||a>l?"min"==u?(s=r(c<p?o(i,s):l*c),l=r(c<p?s/c:o(a,l))):(s=r(c>=p?o(i,s):l*c),l=r(c>=p?s/c:o(a,l))):(s=i,l=a));return n.sw=i,n.sh=a,n.dw=s,n.dh=l,n.multipass=e.multiPassResize,n},_trans:function(t){this._load(this.file,function(n,i){if(n)t(n);else try{this._apply(i,t)}catch(n){e.log("[err] FileAPI.Image.fn._apply:",n),t(n)}})},get:function(t){if(e.support.transform){var n=this,i=n.matrix;"auto"==i.deg?e.getInfo(n.file,function(e,o){i.deg=l[o&&o.exif&&o.exif.Orientation]||0,n._trans(t)}):n._trans(t)}else t("not_support_transform");return this},toData:function(e){return this.get(e)}},i.exifOrientation=l,i.transform=function(t,o,r,a){function s(s,l){var c={},p=e.queue(function(e){a(e,c)});s?p.fail():e.each(o,function(e,o){if(!p.isFail()){var a=new i(l.nodeType?l:t),s="function"==typeof e;if(s?e(l,a):e.width?a[e.preview?"preview":"resize"](e.width,e.height,e.strategy):e.maxWidth&&(l.width>e.maxWidth||l.height>e.maxHeight)&&a.resize(e.maxWidth,e.maxHeight,"max"),e.crop){var u=e.crop;a.crop(0|u.x,0|u.y,u.w||u.width,u.h||u.height)}e.rotate===n&&r&&(e.rotate="auto"),a.set({type:a.matrix.type||e.type||t.type||"image/png"}),s||a.set({deg:e.rotate,overlay:e.overlay,filter:e.filter,quality:e.quality||1}),p.inc(),a.toData(function(e,t){e?p.fail():(c[o]=t,p.next())})}})}t.width?s(!1,t):e.getInfo(t,s)},e.each(["TOP","CENTER","BOTTOM"],function(t,n){e.each(["LEFT","CENTER","RIGHT"],function(e,o){i[t+"_"+e]=3*n+o,i[e+"_"+t]=3*n+o})}),i.toCanvas=function(e){var n=t.createElement("canvas");return n.width=e.videoWidth||e.width,n.height=e.videoHeight||e.height,n.getContext("2d").drawImage(e,0,0),n},i.fromDataURL=function(t,n,i){var o=e.newImage(t);e.extend(o,n),i(o)},i.applyFilter=function(t,n,o){"function"==typeof n?n(t,o):window.Caman&&window.Caman("IMG"==t.tagName?i.toCanvas(t):t,function(){"string"==typeof n?this[n]():e.each(n,function(e,t){this[t](e)},this),this.render(o)})},e.renderImageToCanvas=function(t,n,i,o,r,a,s,l,c,p){try{return t.getContext("2d").drawImage(n,i,o,r,a,s,l,c,p)}catch(t){throw e.log("renderImageToCanvas failed"),t}},e.support.canvas=e.support.transform=s,e.Image=i}(FileAPI,document),function(e){"use strict";!function(e){if(window.navigator&&window.navigator.platform&&/iP(hone|od|ad)/.test(window.navigator.platform)){var t=e.renderImageToCanvas;e.detectSubsampling=function(e){var t,n;return e.width*e.height>1048576&&(t=document.createElement("canvas"),t.width=t.height=1,n=t.getContext("2d"),n.drawImage(e,1-e.width,0),0===n.getImageData(0,0,1,1).data[3])},e.detectVerticalSquash=function(e,t){var n,i,o,r,a,s=e.naturalHeight||e.height,l=document.createElement("canvas"),c=l.getContext("2d");for(t&&(s/=2),l.width=1,l.height=s,c.drawImage(e,0,0),n=c.getImageData(0,0,1,s).data,i=0,o=s,r=s;r>i;)a=n[4*(r-1)+3],0===a?o=r:i=r,r=o+i>>1;return r/s||1},e.renderImageToCanvas=function(n,i,o,r,a,s,l,c,p,u){if("image/jpeg"===i._type){var f,d,m,h,g=n.getContext("2d"),y=document.createElement("canvas"),v=y.getContext("2d");if(y.width=1024,y.height=1024,g.save(),f=e.detectSubsampling(i),f&&(o/=2,r/=2,a/=2,s/=2),d=e.detectVerticalSquash(i,f),f||1!==d){for(r*=d,p=Math.ceil(1024*p/a),u=Math.ceil(1024*u/s/d),c=0,h=0;h<s;){for(l=0,m=0;m<a;)v.clearRect(0,0,1024,1024),v.drawImage(i,o,r,a,s,-m,-h,a,s),g.drawImage(y,0,0,1024,1024,l,c,p,u),m+=1024,l+=p;h+=1024,c+=u}return g.restore(),n}}return t(n,i,o,r,a,s,l,c,p,u)}}}(FileAPI)}(),function(e,t){"use strict";function n(t,n,i){var o=t.blob,r=t.file;if(r){if(!o.toDataURL)return void e.readAsBinaryString(o,function(e){"load"==e.type&&n(t,e.result)});var a={"image/jpeg":".jpe?g","image/png":".png"},s=a[t.type]?t.type:"image/png",l=a[s]||".png",c=o.quality||1;r.match(new RegExp(l+"$","i"))||(r+=l.replace("?","")),t.file=r,t.type=s,!i&&o.toBlob?o.toBlob(function(e){n(t,e)},s,c):n(t,e.toBinaryString(o.toDataURL(s,c)))}else n(t,o)}var i=t.document,o=t.FormData,r=function(){this.items=[]},a=t.encodeURIComponent;r.prototype={append:function(e,t,n,i){this.items.push({name:e,blob:t&&t.blob||(void 0==t?"":t),file:t&&(n||t.name),type:t&&(i||t.type)})},each:function(e){for(var t=0,n=this.items.length;t<n;t++)e.call(this,this.items[t])},toData:function(t,n){n._chunked=e.support.chunked&&n.chunkSize>0&&1==e.filter(this.items,function(e){return e.file}).length,e.support.html5?e.formData&&!this.multipart&&o?n._chunked?(e.log("FileAPI.Form.toPlainData"),this.toPlainData(t)):(e.log("FileAPI.Form.toFormData"),this.toFormData(t)):(e.log("FileAPI.Form.toMultipartData"),this.toMultipartData(t)):(e.log("FileAPI.Form.toHtmlData"),this.toHtmlData(t))},_to:function(t,n,i,o){var r=e.queue(function(){n(t)});this.each(function(a){try{i(a,t,r,o)}catch(t){e.log("FileAPI.Form._to: "+t.message),n(t)}}),r.check()},toHtmlData:function(t){this._to(i.createDocumentFragment(),t,function(t,n){var o,r=t.blob;t.file?(e.reset(r,!0),r.name=t.name,r.disabled=!1,n.appendChild(r)):(o=i.createElement("input"),o.name=t.name,o.type="hidden",o.value=r,n.appendChild(o))})},toPlainData:function(e){this._to({},e,function(e,t,i){e.file&&(t.type=e.file),e.blob.toBlob?(i.inc(),n(e,function(e,n){t.name=e.name,t.file=n,t.size=n.length,t.type=e.type,i.next()})):e.file?(t.name=e.blob.name,t.file=e.blob,t.size=e.blob.size,t.type=e.type):(t.params||(t.params=[]),t.params.push(a(e.name)+"="+a(e.blob))),t.start=-1,t.end=t.file&&t.file.FileAPIReadPosition||-1,t.retry=0})},toFormData:function(e){this._to(new o,e,function(e,t,i){e.blob&&e.blob.toBlob?(i.inc(),n(e,function(e,n){t.append(e.name,n,e.file),i.next()})):e.file?t.append(e.name,e.blob,e.file):t.append(e.name,e.blob),e.file&&t.append("_"+e.name,e.file)})},toMultipartData:function(t){this._to([],t,function(e,t,i,o){i.inc(),n(e,function(e,n){t.push("--_"+o+'\r\nContent-Disposition: form-data; name="'+e.name+'"'+(e.file?'; filename="'+a(e.file)+'"':"")+(e.file?"\r\nContent-Type: "+(e.type||"application/octet-stream"):"")+"\r\n\r\n"+(e.file?n:a(n))+"\r\n"),i.next()},!0)},e.expando)}},e.Form=r}(FileAPI,window),function(e,t){"use strict";var n=function(){},i=e.document,o=function(e){this.uid=t.uid(),this.xhr={abort:n,getResponseHeader:n,getAllResponseHeaders:n},this.options=e},r={"":1,XML:1,Text:1,Body:1};o.prototype={status:0,statusText:"",constructor:o,getResponseHeader:function(e){return this.xhr.getResponseHeader(e)},getAllResponseHeaders:function(){return this.xhr.getAllResponseHeaders()||{}},end:function(i,o){var r=this,a=r.options;r.end=r.abort=n,r.status=i,o&&(r.statusText=o),t.log("xhr.end:",i,o),a.complete(200!=i&&201!=i&&(r.statusText||"unknown"),r),r.xhr&&r.xhr.node&&setTimeout(function(){var t=r.xhr.node;try{t.parentNode.removeChild(t)}catch(e){}try{delete e[r.uid]}catch(e){}e[r.uid]=r.xhr.node=null},9)},abort:function(){this.end(0,"abort"),this.xhr&&(this.xhr.aborted=!0,this.xhr.abort())},send:function(e){var t=this,n=this.options;e.toData(function(e){e instanceof Error?t.end(0,e.message):(n.upload(n,t),t._send.call(t,n,e))},n)},_send:function(n,o){var a,s=this,l=s.uid,c=s.uid+"Load",p=n.url;if(t.log("XHR._send:",o),n.cache||(p+=(~p.indexOf("?")?"&":"?")+t.uid()),o.nodeName){var u=n.jsonp;p=p.replace(/([a-z]+)=(\?)/i,"$1="+l),n.upload(n,s);var f=function(e){if(~p.indexOf(e.origin))try{var n=t.parseJSON(e.data);n.id==l&&d(n.status,n.statusText,n.response)}catch(e){d(0,e.message)}},d=e[l]=function(n,i,o){s.readyState=4,s.responseText=o,s.end(n,i),t.event.off(e,"message",f),e[l]=a=h=e[c]=null};s.xhr.abort=function(){try{h.stop?h.stop():h.contentWindow.stop?h.contentWindow.stop():h.contentWindow.document.execCommand("Stop")}catch(e){}d(0,"abort")},t.event.on(e,"message",f),e[c]=function(){try{var e=h.contentWindow,n=e.document,i=e.result||t.parseJSON(n.body.innerHTML);d(i.status,i.statusText,i.response)}catch(e){t.log("[transport.onload]",e)}},a=i.createElement("div"),a.innerHTML='<form target="'+l+'" action="'+p+'" method="POST" enctype="multipart/form-data" style="position: absolute; top: -1000px; overflow: hidden; width: 1px; height: 1px;"><iframe name="'+l+'" src="javascript:false;" onload="window.'+c+" && "+c+'();"></iframe>'+(u&&n.url.indexOf("=?")<0?'<input value="'+l+'" name="'+u+'" type="hidden"/>':"")+"</form>";var m=a.getElementsByTagName("form")[0],h=a.getElementsByTagName("iframe")[0];m.appendChild(o),t.log(m.parentNode.innerHTML),i.body.appendChild(a),s.xhr.node=a,s.readyState=2;try{m.submit()}catch(e){t.log("iframe.error: "+e)}m=null}else{if(p=p.replace(/([a-z]+)=(\?)&?/i,""),this.xhr&&this.xhr.aborted)return void t.log("Error: already aborted");if(a=s.xhr=t.getXHR(),o.params&&(p+=(p.indexOf("?")<0?"?":"&")+o.params.join("&")),a.open("POST",p,!0),t.withCredentials&&(a.withCredentials="true"),n.headers&&n.headers["X-Requested-With"]||a.setRequestHeader("X-Requested-With","XMLHttpRequest"),t.each(n.headers,function(e,t){a.setRequestHeader(t,e)}),n._chunked){a.upload&&a.upload.addEventListener("progress",t.throttle(function(e){o.retry||n.progress({type:e.type,total:o.size,loaded:o.start+e.loaded,totalSize:o.size},s,n)},100),!1),a.onreadystatechange=function(){var e=parseInt(a.getResponseHeader("X-Last-Known-Byte"),10);if(s.status=a.status,s.statusText=a.statusText,s.readyState=a.readyState,4==a.readyState){for(var i in r)s["response"+i]=a["response"+i];if(a.onreadystatechange=null,!a.status||a.status-201>0)if(t.log("Error: "+a.status),(!a.status&&!a.aborted||500==a.status||416==a.status)&&++o.retry<=n.chunkUploadRetry){var l=a.status?0:t.chunkNetworkDownRetryTimeout;n.pause(o.file,n),t.log("X-Last-Known-Byte: "+e),e?o.end=e:(o.end=o.start-1,416==a.status&&(o.end=o.end-n.chunkSize)),setTimeout(function(){s._send(n,o)},l)}else s.end(a.status);else o.retry=0,o.end==o.size-1?s.end(a.status):(t.log("X-Last-Known-Byte: "+e),e&&(o.end=e),o.file.FileAPIReadPosition=o.end,setTimeout(function(){s._send(n,o)},0));a=null}},o.start=o.end+1,o.end=Math.max(Math.min(o.start+n.chunkSize,o.size)-1,o.start);var g=o.file,y=(g.slice||g.mozSlice||g.webkitSlice).call(g,o.start,o.end+1);o.size&&!y.size?setTimeout(function(){s.end(-1)}):(a.setRequestHeader("Content-Range","bytes "+o.start+"-"+o.end+"/"+o.size),a.setRequestHeader("Content-Disposition","attachment; filename="+encodeURIComponent(o.name)),a.setRequestHeader("Content-Type",o.type||"application/octet-stream"),a.send(y)),g=y=null}else if(a.upload&&a.upload.addEventListener("progress",t.throttle(function(e){n.progress(e,s,n)},100),!1),a.onreadystatechange=function(){if(s.status=a.status,s.statusText=a.statusText,s.readyState=a.readyState,4==a.readyState){for(var e in r)s["response"+e]=a["response"+e];if(a.onreadystatechange=null,!a.status||a.status>201)if(t.log("Error: "+a.status),(!a.status&&!a.aborted||500==a.status)&&(n.retry||0)<n.uploadRetry){n.retry=(n.retry||0)+1;var i=t.networkDownRetryTimeout;n.pause(n.file,n),setTimeout(function(){s._send(n,o)},i)}else s.end(a.status);else s.end(a.status);a=null}},t.isArray(o)){a.setRequestHeader("Content-Type","multipart/form-data; boundary=_"+t.expando);var v=o.join("")+"--_"+t.expando+"--";if(a.sendAsBinary)a.sendAsBinary(v);else{var A=Array.prototype.map.call(v,function(e){return 255&e.charCodeAt(0)});a.send(new Uint8Array(A).buffer)}}else a.send(o)}}},t.XHR=o}(window,FileAPI),function(e,t){"use strict";function n(e){return e>=0?e+"px":e}function i(e){var n,i=r.createElement("canvas"),o=!1;try{n=i.getContext("2d"),n.drawImage(e,0,0,1,1),o=255!=n.getImageData(0,0,1,1).data[4]}catch(e){t.log("[FileAPI.Camera] detectVideoSignal:",e)}return o}var o=e.URL||e.webkitURL,r=e.document,a=e.navigator,s=a.getUserMedia||a.webkitGetUserMedia||a.mozGetUserMedia||a.msGetUserMedia,l=!!s;t.support.media=l;var c=function(e){this.video=e};c.prototype={isActive:function(){return!!this._active},start:function(e){var t,n,r=this,l=r.video,c=function(i){r._active=!i,clearTimeout(n),clearTimeout(t),e&&e(i,r)};s.call(a,{video:!0},function(e){r.stream=e,l.src=o.createObjectURL(e),t=setInterval(function(){i(l)&&c(null)},1e3),n=setTimeout(function(){c("timeout")},5e3),l.play()},c)},stop:function(){try{this._active=!1,this.video.pause();try{this.stream.stop()}catch(e){t.each(this.stream.getTracks(),function(e){e.stop()})}this.stream=null}catch(e){t.log("[FileAPI.Camera] stop:",e)}},shot:function(){return new p(this.video)}},c.get=function(e){return new c(e.firstChild)},c.publish=function(i,o,a){"function"==typeof o&&(a=o,o={}),o=t.extend({},{width:"100%",height:"100%",start:!0},o),i.jquery&&(i=i[0]);var s=function(e){if(e)a(e);else{var t=c.get(i);o.start?t.start(a):a(null,t)}};if(i.style.width=n(o.width),i.style.height=n(o.height),t.html5&&l&&!t.insecureChrome){var p=r.createElement("video");p.style.width=n(o.width),p.style.height=n(o.height),e.jQuery?jQuery(i).empty():i.innerHTML="",i.appendChild(p),s()}else c.fallback(i,o,s)},c.fallback=function(e,t,n){n("not_support_camera")},c.checkAlreadyCaptured=function(){var t,n=a.mediaDevices,i=e.MediaStreamTrack,o=a.enumerateDevices;return t=n&&n.enumerateDevices?function(e){n.enumerateDevices().then(e)}:i&&i.getSources?i.getSources.bind(i):o?o.bind(a):function(e){e([])},function(e){t(function(t){var n=t.some(function(e){return("videoinput"===e.kind||"video"===e.kind)&&e.label});e(n)})}}();var p=function(e){var n=e.nodeName?t.Image.toCanvas(e):e,i=t.Image(n);return i.type="image/png",i.width=n.width,i.height=n.height,i.size=n.width*n.height*4,i};c.Shot=p,t.Camera=c}(window,FileAPI),function(e,t,n){"use strict";var i=e.document,o=e.location,r=e.navigator,a=n.each;n.support.flash=function(){var t=r.mimeTypes,i=!1;if(r.plugins&&"object"==typeof r.plugins["Shockwave Flash"])i=r.plugins["Shockwave Flash"].description&&!(t&&t["application/x-shockwave-flash"]&&!t["application/x-shockwave-flash"].enabledPlugin);else try{i=!(!e.ActiveXObject||!new ActiveXObject("ShockwaveFlash.ShockwaveFlash"))}catch(e){n.log("Flash -- does not supported.")}return i&&/^file:/i.test(o)&&n.log("[warn] Flash does not work on `file:` protocol."),i}(),n.support.flash&&(!n.html5||!n.support.html5||n.cors&&!n.support.cors||n.media&&!n.support.media||n.insecureChrome)&&function(){function s(e){return('<object id="#id#" classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" width="'+(e.width||"100%")+'" height="'+(e.height||"100%")+'"><param name="movie" value="#src#" /><param name="flashvars" value="#flashvars#" /><param name="swliveconnect" value="true" /><param name="allowscriptaccess" value="always" /><param name="allownetworking" value="all" /><param name="menu" value="false" /><param name="wmode" value="#wmode#" /><embed flashvars="#flashvars#" swliveconnect="true" allownetworking="all" allowscriptaccess="always" name="#id#" src="#src#" width="'+(e.width||"100%")+'" height="'+(e.height||"100%")+'" menu="false" wmode="transparent" type="application/x-shockwave-flash"></embed></object>').replace(/#(\w+)#/gi,function(t,n){return e[n]})}function l(e,t){if(e&&e.style){var n,i;for(n in t){i=t[n],"number"==typeof i&&(i+="px");try{e.style[n]=i}catch(e){}}}}function c(e,t){a(t,function(t,n){var i=e[n];e[n]=function(){return this.parent=i,t.apply(this,arguments)}})}function p(e){return e&&!e.flashId}function u(e){var t=e.wid=n.uid();return w._fn[t]=e,"FileAPI.Flash._fn."+t}function f(e){try{w._fn[e.wid]=null,delete w._fn[e.wid]}catch(e){}}function d(e,t){if(!b.test(e)){if(/^\.\//.test(e)||"/"!=e.charAt(0)){var n=o.pathname;n=n.substr(0,n.lastIndexOf("/")),e=(n+"/"+e).replace("/./","/")}"//"!=e.substr(0,2)&&(e="//"+o.host+e),b.test(e)||(e=o.protocol+e)}return t&&(e+=(/\?/.test(e)?"&":"?")+t),e}function m(e,t,o){function r(){try{w.get(c).setImage(t)}catch(e){n.log('[err] FlashAPI.Preview.setImage -- can not set "base64":',e)}}var a,c=n.uid(),p=i.createElement("div"),m=10;for(a in e)p.setAttribute(a,e[a]),p[a]=e[a];l(p,e),e.width="100%",e.height="100%",p.innerHTML=s(n.extend({id:c,src:d(n.flashImageUrl,"r="+n.uid()),wmode:"opaque",flashvars:"scale="+e.scale+"&callback="+u(function e(){return f(e),--m>0&&r(),!0})},e)),o(!1,p),p=null}function h(e){return{id:e.id,name:e.name,matrix:e.matrix,flashId:e.flashId}}function g(t){var n=t.getBoundingClientRect(),o=i.body,r=(t&&t.ownerDocument).documentElement;return{top:n.top+(e.pageYOffset||r.scrollTop)-(r.clientTop||o.clientTop||0),left:n.left+(e.pageXOffset||r.scrollLeft)-(r.clientLeft||o.clientLeft||0),width:n.right-n.left,height:n.bottom-n.top}}var y=n.uid(),v=0,A={},b=/^https?:/i,w={_fn:{},init:function(){var e=i.body&&i.body.firstChild;if(e)do{if(1==e.nodeType){n.log("FlashAPI.state: awaiting");var t=i.createElement("div");return t.id="_"+y,l(t,{top:1,right:1,width:5,height:5,position:"absolute",zIndex:"2147483647"}),e.parentNode.insertBefore(t,e),void w.publish(t,y)}}while(e=e.nextSibling);v<10&&setTimeout(w.init,50*++v)},publish:function(e,t,i){i=i||{},e.innerHTML=s({id:t,src:d(n.flashUrl,"r="+n.version),wmode:i.camera?"":"transparent",flashvars:"callback="+(i.onEvent||"FileAPI.Flash.onEvent")+"&flashId="+t+"&storeKey="+r.userAgent.match(/\d/gi).join("")+"_"+n.version+(w.isReady||(n.pingUrl?"&ping="+n.pingUrl:""))+"&timeout="+n.flashAbortTimeout+(i.camera?"&useCamera="+d(n.flashWebcamUrl):"")+"&debug="+(n.debug?"1":"")},i)},ready:function(){n.log("FlashAPI.state: ready"),w.ready=n.F,w.isReady=!0,w.patch(),w.patchCamera&&w.patchCamera(),n.event.on(i,"mouseover",w.mouseover),n.event.on(i,"click",function(e){w.mouseover(e)&&(e.preventDefault?e.preventDefault():e.returnValue=!0)})},getEl:function(){return i.getElementById("_"+y)},getWrapper:function(e){do{if(/js-fileapi-wrapper/.test(e.className))return e}while((e=e.parentNode)&&e!==i.body)},mouseover:function(e){var t=n.event.fix(e).target;if(/input/i.test(t.nodeName)&&"file"==t.type&&!t.disabled){var o=t.getAttribute(y),r=w.getWrapper(t);if(n.multiFlash){if("i"==o||"r"==o)return!1;if("p"!=o){t.setAttribute(y,"i");var a=i.createElement("div");if(!r)return void n.log("[err] FlashAPI.mouseover: js-fileapi-wrapper not found");l(a,{top:0,left:0,width:t.offsetWidth,height:t.offsetHeight,zIndex:"2147483647",position:"absolute"}),r.appendChild(a),w.publish(a,n.uid()),t.setAttribute(y,"p")}return!0}if(r){var s=g(r);l(w.getEl(),s),w.curInp=t}}else/object|embed/i.test(t.nodeName)||l(w.getEl(),{top:1,left:1,width:5,height:5})},onEvent:function(e){var t=e.type;if("ready"==t){try{w.getInput(e.flashId).setAttribute(y,"r")}catch(e){}return w.ready(),setTimeout(function(){w.mouseenter(e)},50),!0}"ping"===t?n.log("(flash -> js).ping:",[e.status,e.savedStatus],e.error):"log"===t?n.log("(flash -> js).log:",e.target):t in w&&setTimeout(function(){n.log("FlashAPI.event."+e.type+":",e),w[t](e)},1)},mouseenter:function(e){var t=w.getInput(e.flashId);if(t){w.cmd(e,"multiple",null!=t.getAttribute("multiple"));var i=[],o={};a((t.getAttribute("accept")||"").split(/,\s*/),function(e){n.accept[e]&&a(n.accept[e].split(" "),function(e){o[e]=1})}),a(o,function(e,t){i.push(t)}),w.cmd(e,"accept",i.length?i.join(",")+","+i.join(",").toUpperCase():"*")}},get:function(t){return i[t]||e[t]||i.embeds[t]},getInput:function(e){if(!n.multiFlash)return w.curInp;try{var t=w.getWrapper(w.get(e));if(t)return t.getElementsByTagName("input")[0]}catch(t){n.log('[err] Can not find "input" by flashId:',e,t)}},select:function(e){var o,r=w.getInput(e.flashId),s=n.uid(r),l=e.target.files;a(l,function(e){n.checkFileObj(e)}),A[s]=l,i.createEvent?(o=i.createEvent("Event"),o.files=l,o.initEvent("change",!0,!0),r.dispatchEvent(o)):t?t(r).trigger({type:"change",files:l}):(o=i.createEventObject(),o.files=l,r.fireEvent("onchange",o))},cmd:function(e,t,i,o){try{return n.log("(js -> flash)."+t+":",i),w.get(e.flashId||e).cmd(t,i)}catch(r){n.log("(js -> flash).onError:",r.toString()),o||setTimeout(function(){w.cmd(e,t,i,!0)},50)}},patch:function(){n.flashEngine=!0,c(n,{getFiles:function(e,t,i){if(i)return n.filterFiles(n.getFiles(e),t,i),null;var o=n.isArray(e)?e:A[n.uid(e.target||e.srcElement||e)];return o?(t&&(t=n.getFilesFilter(t),o=n.filter(o,function(e){return t.test(e.name)})),o):this.parent.apply(this,arguments)},getInfo:function(e,t){if(p(e))this.parent.apply(this,arguments);else if(e.isShot)t(null,e.info={width:e.width,height:e.height});else{if(!e.__info){var i=e.__info=n.defer();w.cmd(e,"getFileInfo",{id:e.id,callback:u(function t(n,o){f(t),i.resolve(n,e.info=o)})})}e.__info.then(t)}}}),n.support.transform=!0,n.Image&&c(n.Image.prototype,{get:function(e,t){return this.set({scaleMode:t||"noScale"}),this.parent(e)},_load:function(e,t){if(n.log("FlashAPI.Image._load:",e),p(e))this.parent.apply(this,arguments);else{var i=this;n.getInfo(e,function(n){t.call(i,n,e)})}},_apply:function(e,t){if(n.log("FlashAPI.Image._apply:",e),p(e))this.parent.apply(this,arguments);else{var i=this.getMatrix(e.info),o=t;w.cmd(e,"imageTransform",{id:e.id,matrix:i,callback:u(function r(a,s){n.log("FlashAPI.Image._apply.callback:",a),f(r),a?o(a):n.support.html5||n.support.dataURI&&!(s.length>3e4)?(i.filter&&(o=function(e,o){e?t(e):n.Image.applyFilter(o,i.filter,function(){t(e,this.canvas)})}),n.newImage("data:"+e.type+";base64,"+s,o)):m({width:i.deg%180?i.dh:i.dw,height:i.deg%180?i.dw:i.dh,scale:i.scaleMode},s,o)})})}},toData:function(e){var t=this.file,i=t.info,o=this.getMatrix(i);n.log("FlashAPI.Image.toData"),p(t)?this.parent.apply(this,arguments):("auto"==o.deg&&(o.deg=n.Image.exifOrientation[i&&i.exif&&i.exif.Orientation]||0),e.call(this,!t.info,{id:t.id,flashId:t.flashId,name:t.name,type:t.type,matrix:o}))}}),n.Image&&c(n.Image,{fromDataURL:function(e,t,i){!n.support.dataURI||e.length>3e4?m(n.extend({scale:"exactFit"},t),e.replace(/^data:[^,]+,/,""),function(e,t){i(t)}):this.parent(e,t,i)}}),c(n.Form.prototype,{toData:function(e){for(var t=this.items,i=t.length;i--;)if(t[i].file&&p(t[i].blob))return this.parent.apply(this,arguments);n.log("FlashAPI.Form.toData"),e(t)}}),c(n.XHR.prototype,{_send:function(e,t){if(t.nodeName||t.append&&n.support.html5||n.isArray(t)&&"string"==typeof t[0])return this.parent.apply(this,arguments);var i,o,r={},s={},l=this;if(a(t,function(e){e.file?(s[e.name]=e=h(e.blob),o=e.id,i=e.flashId):r[e.name]=e.blob}),o||(i=y),!i)return n.log("[err] FlashAPI._send: flashId -- undefined"),this.parent.apply(this,arguments);n.log("FlashAPI.XHR._send: "+i+" -> "+o),l.xhr={headers:{},abort:function(){w.cmd(i,"abort",{id:o})},getResponseHeader:function(e){return this.headers[e]},getAllResponseHeaders:function(){return this.headers}}
;var c=n.queue(function(){w.cmd(i,"upload",{url:d(e.url.replace(/([a-z]+)=(\?)&?/i,"")),data:r,files:o?s:null,headers:e.headers||{},callback:u(function t(i){var o=i.type,r=i.result;n.log("FlashAPI.upload."+o),"progress"==o?(i.loaded=Math.min(i.loaded,i.total),i.lengthComputable=!0,e.progress(i)):"complete"==o?(f(t),"string"==typeof r&&(l.responseText=r.replace(/%22/g,'"').replace(/%5c/g,"\\").replace(/%26/g,"&").replace(/%25/g,"%")),l.end(i.status||200)):"abort"!=o&&"error"!=o||(l.end(i.status||0,i.message),f(t))})})});a(s,function(e){c.inc(),n.getInfo(e,c.next)}),c.check()}})}};n.Flash=w,n.newImage("data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw==",function(e,t){n.support.dataURI=!(1!=t.width||1!=t.height),w.init()})}()}(window,window.jQuery,FileAPI),function(e,t,n){"use strict";var i=n.each,o=[];!n.support.flash||!n.media||n.support.media&&n.html5&&!n.insecureChrome||function(){function e(e){var t=e.wid=n.uid();return n.Flash._fn[t]=e,"FileAPI.Flash._fn."+t}function t(e){try{n.Flash._fn[e.wid]=null,delete n.Flash._fn[e.wid]}catch(e){}}var r=n.Flash;n.extend(n.Flash,{patchCamera:function(){n.Camera.fallback=function(i,o,a){var s=n.uid();n.log("FlashAPI.Camera.publish: "+s),r.publish(i,s,n.extend(o,{camera:!0,onEvent:e(function e(i){"camera"===i.type&&(t(e),i.error?(n.log("FlashAPI.Camera.publish.error: "+i.error),a(i.error)):(n.log("FlashAPI.Camera.publish.success: "+s),a(null)))})}))},i(o,function(e){n.Camera.fallback.apply(n.Camera,e)}),o=[],n.extend(n.Camera.prototype,{_id:function(){return this.video.id},start:function(i){var o=this;r.cmd(this._id(),"camera.on",{callback:e(function e(r){t(e),r.error?(n.log("FlashAPI.camera.on.error: "+r.error),i(r.error,o)):(n.log("FlashAPI.camera.on.success: "+o._id()),o._active=!0,i(null,o))})})},stop:function(){this._active=!1,r.cmd(this._id(),"camera.off")},shot:function(){n.log("FlashAPI.Camera.shot:",this._id());var e=n.Flash.cmd(this._id(),"shot",{});return e.type="image/png",e.flashId=this._id(),e.isShot=!0,new n.Camera.Shot(e)}})}}),n.Camera.fallback=function(){o.push(arguments)}}()}(window,window.jQuery,FileAPI),i=[],void 0!==(o=function(){return FileAPI}.apply(t,i))&&(e.exports=o)},"./components/fs-file-drag-base/fs-file-drag-base.ts":function(e,t,n){"use strict";var i=this&&this.__decorate||function(e,t,n,i){var o,r=arguments.length,a=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(r<3?o(a):r>3?o(t,n,a):o(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var r=n("@angular/core"),a=function(){function e(e){this.el=e,this.fileOverTarget=!1}return e.prototype.onDragOverElement=function(e){this.el.nativeElement.contains(e.target)&&(this.fileOverTarget=!0)},e.prototype.onDrop=function(e){this.fileOverTarget&&(e.preventDefault(),e.stopPropagation(),this.fileOverTarget=!1)},e.prototype.onDragOver=function(e){this.fileOverTarget&&(e.preventDefault(),e.stopPropagation(),this.el.nativeElement.contains(e.target)||(this.fileOverTarget=!1))},i([r.HostBinding("class.dragover"),o("design:type",Object)],e.prototype,"fileOverTarget",void 0),i([r.HostListener("dragenter",["$event"]),o("design:type",Function),o("design:paramtypes",[Object]),o("design:returntype",void 0)],e.prototype,"onDragOverElement",null),i([r.HostListener("window:drop",["$event"]),o("design:type",Function),o("design:paramtypes",[Object]),o("design:returntype",void 0)],e.prototype,"onDrop",null),i([r.HostListener("window:dragover",["$event"]),o("design:type",Function),o("design:paramtypes",[Object]),o("design:returntype",void 0)],e.prototype,"onDragOver",null),e=i([r.Component({selector:"fs-file-drag-base"}),o("design:paramtypes",[r.ElementRef])],e)}();t.FsFileDragBaseComponent=a},"./components/fs-file-drag-base/index.ts":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}(n("./components/fs-file-drag-base/fs-file-drag-base.ts"))},"./components/fs-file-picker/fs-file-picker.component.html":function(e,t){e.exports='<div class="label"\n     [ngStyle]="{\'width.px\': previewWidth || 150}">\n  <ng-content select="[fs-file-label]"></ng-content>\n</div>\n<fs-file-preview class="preview"\n                 *ngIf="file; else preview"\n                 (remove)="removeFile($event)"\n                 [file]="file"\n                 [previewWidth]="previewWidth"\n                 [previewHeight]="previewHeight">\n  <ng-template fs-file-preview-action placement="bottom-left" action="remove" tooltip="Remove">\n    <mat-icon>close</mat-icon>\n  </ng-template>\n  <ng-template fs-file-preview-action placement="bottom-right" tooltip="Reupload" (click)="fileInput.click()">\n    <mat-icon>cloud_upload</mat-icon>\n  </ng-template>\n</fs-file-preview>\n\n<ng-template #preview>\n  <div class="select" (click)="fileInput.click()">\n    <mat-icon>cloud_upload</mat-icon>\n    <div class="instruction">{{instruction}}</div>\n    <button mat-raised-button color="primary">Upload</button>\n  </div>\n</ng-template>\n\n<input type="file"\n       [hidden]="true"\n       [disabled]="fsFile.disabled"\n       [multiple]="fsFile.multiple"\n       [attr.accept]="fsFile.accept"\n       #fileInput\n>\n\n'},"./components/fs-file-picker/fs-file-picker.component.scss":function(e,t,n){var i=n('../node_modules/css-loader/index.js?{"sourceMap":true}!../node_modules/postcss-loader/lib/index.js?{"sourceMap":true}!../node_modules/resolve-url-loader/index.js?{"sourceMap":true}!../node_modules/sass-loader/lib/loader.js?{"sourceMap":true}!./components/fs-file-picker/fs-file-picker.component.scss');e.exports="string"==typeof i?i:i.toString()},"./components/fs-file-picker/fs-file-picker.component.ts":function(e,t,n){"use strict";var i=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),o=this&&this.__decorate||function(e,t,n,i){var o,r=arguments.length,a=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(r<3?o(a):r>3?o(t,n,a):o(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a},r=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var a=n("@angular/core"),s=n("./services/index.ts"),l=n("./components/fs-file-drag-base/index.ts"),c=function(e){function t(t,n){var i=e.call(this,n)||this;return i.fsFile=t,i.el=n,i.previewWidth=150,i.previewHeight=150,i.select=new a.EventEmitter,i.instruction="Drag & Drop your file or use the button below",i}return i(t,e),Object.defineProperty(t.prototype,"multiple",{set:function(e){this.fsFile.multiple=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"accept",{set:function(e){this.fsFile.accept=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"minSize",{set:function(e){this.fsFile.minSize=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"maxSize",{set:function(e){this.fsFile.maxSize=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"imageMaxWidth",{set:function(e){this.fsFile.imageMaxWidth=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"imageMaxHeight",{set:function(e){this.fsFile.imageMaxHeight=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"imageQuality",{set:function(e){this.fsFile.imageQuality=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"imageFormat",{set:function(e){this.fsFile.imageFormat=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"disabled",{set:function(e){this.fsFile.disabled=e},enumerable:!0,configurable:!0}),t.prototype.ngOnInit=function(){var e=this;this.fsFile.initForElement(this.fileInput),this.fsFile.initDragNDropForElement(this.el),this.fsFile.select.subscribe(function(t){e.file=t,e.select.emit(t)})},t.prototype.removeFile=function(e){this.file=void 0},o([a.Input(),r("design:type",Object),r("design:paramtypes",[Object])],t.prototype,"multiple",null),o([a.Input(),r("design:type",Object),r("design:paramtypes",[Object])],t.prototype,"accept",null),o([a.Input(),r("design:type",Object),r("design:paramtypes",[Object])],t.prototype,"minSize",null),o([a.Input(),r("design:type",Object),r("design:paramtypes",[Object])],t.prototype,"maxSize",null),o([a.Input(),r("design:type",Object),r("design:paramtypes",[Object])],t.prototype,"imageMaxWidth",null),o([a.Input(),r("design:type",Object),r("design:paramtypes",[Object])],t.prototype,"imageMaxHeight",null),o([a.Input(),r("design:type",Object),r("design:paramtypes",[Object])],t.prototype,"imageQuality",null),o([a.Input(),r("design:type",Object),r("design:paramtypes",[Object])],t.prototype,"imageFormat",null),o([a.Input(),r("design:type",Object),r("design:paramtypes",[Object])],t.prototype,"disabled",null),o([a.Input(),r("design:type",Object)],t.prototype,"previewWidth",void 0),o([a.Input(),r("design:type",Object)],t.prototype,"previewHeight",void 0),o([a.Output("select"),r("design:type",Object)],t.prototype,"select",void 0),o([a.ViewChild("fileInput"),r("design:type",Object)],t.prototype,"fileInput",void 0),t=o([a.Component({selector:"fs-file-picker",template:n("./components/fs-file-picker/fs-file-picker.component.html"),styles:[n("./components/fs-file-picker/fs-file-picker.component.scss")],providers:[s.FsFileService]}),r("design:paramtypes",[s.FsFileService,a.ElementRef])],t)}(l.FsFileDragBaseComponent);t.FsFilePickerComponent=c},"./components/fs-file-picker/index.ts":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}(n("./components/fs-file-picker/fs-file-picker.component.ts"))},"./components/fs-file-preview-base/fs-file-preview-base.ts":function(e,t,n){"use strict";var i=this&&this.__decorate||function(e,t,n,i){var o,r=arguments.length,a=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(r<3?o(a):r>3?o(t,n,a):o(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var r=n("@angular/core"),a=n("./directives/index.ts"),s=function(){function e(){this.actions=[],this.actionsTemplate=[]}return Object.defineProperty(e.prototype,"actionsParams",{set:function(e){var t=e.toArray().map(function(e,t){var n=Object.assign({},e);return n.index=t,n.forTypes&&!Array.isArray(n.forTypes)&&(n.forTypes=n.forTypes.split(",").map(function(e){return e.trim()})),n});(n=this.actions).push.apply(n,t);var n},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"actionsTemplateRefs",{set:function(e){(t=this.actionsTemplate).push.apply(t,e.toArray());var t},enumerable:!0,configurable:!0}),i([r.ContentChildren(a.FsFilePreviewActionDirective),o("design:type",r.QueryList),o("design:paramtypes",[r.QueryList])],e.prototype,"actionsParams",null),i([r.ContentChildren(a.FsFilePreviewActionDirective,{read:r.TemplateRef}),o("design:type",r.QueryList),o("design:paramtypes",[r.QueryList])],e.prototype,"actionsTemplateRefs",null),e=i([r.Component({selector:"fs-file-previews-base"}),o("design:paramtypes",[])],e)}();t.FsFilePreviewsBaseComponent=s},"./components/fs-file-preview-base/index.ts":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}(n("./components/fs-file-preview-base/fs-file-preview-base.ts"))},"./components/fs-file-preview/fs-file-preview.component.html":function(e,t){e.exports='<div [style.width.px]="previewWidth" [style.height.px]="previewHeight" class="preview-container">\n\n  \x3c!-- Progress container --\x3e\n  <ng-container *ngIf="file.progress; else elsePreview">\n    <mat-spinner class="spinner" [diameter]="previewWidth/2"></mat-spinner>\n  </ng-container>\n\n  \x3c!-- Image container --\x3e\n  <ng-template #elsePreview>\n    <ng-container *ngIf="file.typeImage; else nonImage">\n      <img [src]="preview">\n    </ng-container>\n\n    \x3c!-- Non image container --\x3e\n    <ng-template #nonImage>\n        <div class="file-ext">{{file.extension}}</div>\n        <div class="file-name" [matTooltip]="file.name">{{file.name}}</div>\n    </ng-template>\n  </ng-template>\n</div>\n\n\x3c!-- Actions --\x3e\n<div class="actions">\n  <button class="action" mat-mini-fab color="primary"\n          *ngFor="let action of filteredActions"\n          [ngClass]="getActionClasses(action)"\n          [matTooltip]="action.tooltip"\n          (click)="callAction(action)">\n    <ng-template [ngTemplateOutlet]="actionsTemplate[action.index]"></ng-template>\n  </button>\n</div>\n'},"./components/fs-file-preview/fs-file-preview.component.scss":function(e,t,n){var i=n('../node_modules/css-loader/index.js?{"sourceMap":true}!../node_modules/postcss-loader/lib/index.js?{"sourceMap":true}!../node_modules/resolve-url-loader/index.js?{"sourceMap":true}!../node_modules/sass-loader/lib/loader.js?{"sourceMap":true}!./components/fs-file-preview/fs-file-preview.component.scss');e.exports="string"==typeof i?i:i.toString()},"./components/fs-file-preview/fs-file-preview.component.ts":function(e,t,n){"use strict";var i=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),o=this&&this.__decorate||function(e,t,n,i){var o,r=arguments.length,a=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(r<3?o(a):r>3?o(t,n,a):o(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a},r=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var a=n("@angular/core"),s=n("../node_modules/fileapi/dist/FileAPI.js"),l=n("./models/fs-file.ts"),c=n("./components/fs-file-preview-base/index.ts"),p=function(e){function t(){var t=e.call(this)||this;return t.previewWidth=150,t.previewHeight=150,t.remove=new a.EventEmitter,t.filteredActions=[],t}return i(t,e),Object.defineProperty(t.prototype,"_actions",{set:function(e){(t=this.actions).push.apply(t,e);var t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"_actionsTemplate",{set:function(e){(t=this.actionsTemplate).push.apply(t,e);var t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"_file",{set:function(e){this.file=e,this.generateFilePreview(e)},enumerable:!0,configurable:!0}),t.prototype.ngAfterViewInit=function(){this.cleanActions()},t.prototype.getActionClasses=function(e){return e.placement?[e.placement]:[]},t.prototype.callAction=function(e){switch(e.action){case"remove":this.remove.emit(this.file);break;default:e.click&&e.click.emit(this.file)}},t.prototype.generateFilePreview=function(e){var t=this;this.file.typeImage&&(e.progress=!0,s.Image(e.file).preview(this.previewWidth,this.previewHeight).get(function(n,i){s.readAsDataURL(i,function(n){switch(n.type){case"load":t.preview=n.result,e.progress=!1;break;case"error":alert("Image preview error for file "+e.name),e.progress=!1}})}))},t.prototype.cleanActions=function(){for(var e in this.actions)if(this.actions.hasOwnProperty(e)&&this.actions[e].forTypes)for(var t=this.file.type.split("/"),n=t[0],i=t[1],o=this.actions[e].forTypes,r=0;r<o.length;r++){var a=o[r].split("/"),s=a[0],l=a[1],c=s===n&&(l===i||"*"===l);if(c){this.filteredActions.push(this.actions[e]);break}}else this.filteredActions.push(this.actions[e])},o([a.Input(),r("design:type",Object),r("design:paramtypes",[Object])],t.prototype,"_actions",null),o([a.Input(),r("design:type",Object),r("design:paramtypes",[Object])],t.prototype,"_actionsTemplate",null),o([a.Input(),r("design:type",Object)],t.prototype,"previewWidth",void 0),o([a.Input(),r("design:type",Object)],t.prototype,"previewHeight",void 0),o([a.Input("file"),r("design:type",l.FsFile),r("design:paramtypes",[l.FsFile])],t.prototype,"_file",null),o([a.Output(),r("design:type",Object)],t.prototype,"remove",void 0),t=o([a.Component({selector:"fs-file-preview",template:n("./components/fs-file-preview/fs-file-preview.component.html"),styles:[n("./components/fs-file-preview/fs-file-preview.component.scss")]}),r("design:paramtypes",[])],t)}(c.FsFilePreviewsBaseComponent);t.FsFilePreviewComponent=p},"./components/fs-file-preview/index.ts":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}(n("./components/fs-file-preview/fs-file-preview.component.ts"))},"./components/fs-file-previews/fs-file-previews.component.html":function(e,t){e.exports='<fs-file-preview\n  *ngFor="let file of files"\n  [file]="file"\n  [_actions]="actions"\n  [_actionsTemplate]="actionsTemplate"\n  [previewWidth]="previewWidth"\n  [previewHeight]="previewHeight"\n  (remove)="removeFile($event)"\n  class="preview">\n</fs-file-preview>\n'},"./components/fs-file-previews/fs-file-previews.component.scss":function(e,t,n){var i=n('../node_modules/css-loader/index.js?{"sourceMap":true}!../node_modules/postcss-loader/lib/index.js?{"sourceMap":true}!../node_modules/resolve-url-loader/index.js?{"sourceMap":true}!../node_modules/sass-loader/lib/loader.js?{"sourceMap":true}!./components/fs-file-previews/fs-file-previews.component.scss');e.exports="string"==typeof i?i:i.toString()},"./components/fs-file-previews/fs-file-previews.component.ts":function(e,t,n){"use strict";var i=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),o=this&&this.__decorate||function(e,t,n,i){var o,r=arguments.length,a=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(r<3?o(a):r>3?o(t,n,a):o(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a},r=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var a=n("@angular/core"),s=n("./components/fs-file-preview-base/index.ts"),l=function(e){function t(){var t=e.call(this)||this;return t.previewWidth=150,t.previewHeight=150,t.queue=!0,t}return i(t,e),t.prototype.ngOnInit=function(){},t.prototype.removeFile=function(e){var t=this.files.indexOf(e);t>-1&&this.files.splice(t,1)},o([a.Input(),r("design:type",Object)],t.prototype,"files",void 0),o([a.Input(),r("design:type",Object)],t.prototype,"previewWidth",void 0),o([a.Input(),r("design:type",Object)],t.prototype,"previewHeight",void 0),o([a.HostBinding("class.queue"),r("design:type",Object)],t.prototype,"queue",void 0),t=o([a.Component({selector:"fs-file-previews",template:n("./components/fs-file-previews/fs-file-previews.component.html"),styles:[n("./components/fs-file-previews/fs-file-previews.component.scss")],encapsulation:a.ViewEncapsulation.None}),r("design:paramtypes",[])],t)}(s.FsFilePreviewsBaseComponent);t.FsFilePreviewsComponent=l},"./components/fs-file-previews/index.ts":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}(n("./components/fs-file-previews/fs-file-previews.component.ts"))},"./components/fs-file/fs-file.component.html":function(e,t){e.exports='<label (click)="fileInput.click()">\n  <ng-content></ng-content>\n</label>\n<input type="file"\n       [hidden]="true"\n       [disabled]="fsFile.disabled"\n       [multiple]="fsFile.multiple"\n       [attr.accept]="fsFile.accept"\n       #fileInput\n>\n'},"./components/fs-file/fs-file.component.ts":function(e,t,n){"use strict";var i=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),o=this&&this.__decorate||function(e,t,n,i){var o,r=arguments.length,a=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(r<3?o(a):r>3?o(t,n,a):o(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a},r=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var a=n("@angular/core"),s=n("./services/index.ts"),l=n("./components/fs-file-drag-base/index.ts"),c=function(e){function t(t,n){var i=e.call(this,n)||this;return i.fsFile=t,i.el=n,i.imageFixOrientation=!0,i.select=i.fsFile.select,i}return i(t,e),Object.defineProperty(t.prototype,"multiple",{set:function(e){this.fsFile.multiple=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"accept",{set:function(e){this.fsFile.accept=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"minSize",{set:function(e){this.fsFile.minSize=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"maxSize",{set:function(e){this.fsFile.maxSize=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"imageMaxWidth",{set:function(e){this.fsFile.imageMaxWidth=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"imageMaxHeight",{set:function(e){this.fsFile.imageMaxHeight=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"imageQuality",{set:function(e){this.fsFile.imageQuality=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"imageFormat",{set:function(e){this.fsFile.imageFormat=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"disabled",{set:function(e){this.fsFile.disabled=e},enumerable:!0,configurable:!0}),t.prototype.ngOnInit=function(){this.fsFile.initForElement(this.fileInput),this.fsFile.initDragNDropForElement(this.el)},o([a.Input(),r("design:type",Object),r("design:paramtypes",[Object])],t.prototype,"multiple",null),o([a.Input(),r("design:type",Object),r("design:paramtypes",[Object])],t.prototype,"accept",null),o([a.Input(),r("design:type",Object),r("design:paramtypes",[Object])],t.prototype,"minSize",null),o([a.Input(),r("design:type",Object),r("design:paramtypes",[Object])],t.prototype,"maxSize",null),o([a.Input(),r("design:type",Object),r("design:paramtypes",[Object])],t.prototype,"imageMaxWidth",null),o([a.Input(),r("design:type",Object),r("design:paramtypes",[Object])],t.prototype,"imageMaxHeight",null),o([a.Input(),r("design:type",Object),r("design:paramtypes",[Object])],t.prototype,"imageQuality",null),o([a.Input(),r("design:type",Object),r("design:paramtypes",[Object])],t.prototype,"imageFormat",null),o([a.Input(),r("design:type",Object),r("design:paramtypes",[Object])],t.prototype,"disabled",null),o([a.Input(),r("design:type",Object)],t.prototype,"imageFixOrientation",void 0),o([a.Output("select"),r("design:type",a.EventEmitter)],t.prototype,"select",void 0),o([a.ViewChild("fileInput"),r("design:type",Object)],t.prototype,"fileInput",void 0),t=o([a.Component({selector:"fs-file",providers:[s.FsFileService],template:n("./components/fs-file/fs-file.component.html")}),r("design:paramtypes",[s.FsFileService,a.ElementRef])],t)}(l.FsFileDragBaseComponent);t.FsFileComponent=c},"./components/fs-file/index.ts":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}(n("./components/fs-file/fs-file.component.ts"))},"./components/index.ts":function(e,t,n){"use strict";function i(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}Object.defineProperty(t,"__esModule",{value:!0}),i(n("./components/fs-file/index.ts")),i(n("./components/fs-file-previews/index.ts")),i(n("./components/fs-file-preview/index.ts")),i(n("./components/fs-file-picker/index.ts"))},"./directives/fs-file-preview-action.directive.ts":function(e,t,n){"use strict";var i=this&&this.__decorate||function(e,t,n,i){var o,r=arguments.length,a=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(r<3?o(a):r>3?o(t,n,a):o(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var r=n("@angular/core"),a=function(){function e(){this.index=null,this.click=new r.EventEmitter}return i([r.Input(),o("design:type",String)],e.prototype,"placement",void 0),i([r.Input(),o("design:type",String)],e.prototype,"tooltip",void 0),i([r.Input(),o("design:type",String)],e.prototype,"action",void 0),i([r.Input("for-types"),o("design:type",Object)],e.prototype,"forTypes",void 0),i([r.Output(),o("design:type",Object)],e.prototype,"click",void 0),e=i([r.Directive({selector:"[fs-file-preview-action]"})],e)}();t.FsFilePreviewActionDirective=a},"./directives/index.ts":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}(n("./directives/fs-file-preview-action.directive.ts"))},"./fs-component.module.ts":function(e,t,n){"use strict";var i=this&&this.__decorate||function(e,t,n,i){var o,r=arguments.length,a=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(r<3?o(a):r>3?o(t,n,a):o(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(t,"__esModule",{value:!0});var o=n("@angular/core"),r=n("@angular/common"),a=n("@angular/material"),s=n("../node_modules/@firestitch/common/common.umd.js"),l=n("./components/index.ts"),c=n("./directives/index.ts"),p=function(){function e(){}return t=e,e.forRoot=function(){return{ngModule:t,providers:[]}},e=t=i([o.NgModule({imports:[r.CommonModule,s.FsCommonModule,a.MatIconModule,a.MatTooltipModule,a.MatProgressSpinnerModule,a.MatButtonModule],exports:[l.FsFileComponent,l.FsFilePreviewsComponent,l.FsFilePreviewComponent,c.FsFilePreviewActionDirective,l.FsFilePickerComponent],entryComponents:[],declarations:[l.FsFileComponent,l.FsFilePreviewsComponent,l.FsFilePreviewComponent,c.FsFilePreviewActionDirective,l.FsFilePickerComponent],providers:[]})],e);var t}();t.FsFileModule=p},"./index.ts":function(e,t,n){"use strict";function i(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}Object.defineProperty(t,"__esModule",{value:!0}),i(n("./fs-component.module.ts")),i(n("./components/index.ts")),i(n("./services/index.ts")),i(n("./directives/index.ts"))},"./models/fs-file.ts":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e){this.progress=!1,this.file=e,this.name=e.name,this.size=e.size,this.type=e.type;var t=this.file.name.split(".");t.length>1&&(this.extension=t[t.length-1])}return Object.defineProperty(e.prototype,"typeImage",{get:function(){return!!this.type.match(/^image\/(gif|jpeg|pjpeg|png|svg\+xml|tiff|vnd\.microsoft\.icon|vnd\.wap\.wbmp|webp)/i)},enumerable:!0,configurable:!0}),e.prototype.parseInfo=function(e){this.imageWidth=e.width,this.imageHeight=e.height},e.prototype.toObject=function(){return{name:this.name,type:this.type,size:this.size,progress:this.progress,extension:this.extension,typeImage:this.typeImage,imageWidth:this.imageWidth,imageHeight:this.imageHeight}},e}();t.FsFile=i},"./services/fs-file.service.ts":function(e,t,n){"use strict";function i(e){var t,n,i;return a(this,function(o){switch(o.label){case 0:t=0,n=e,o.label=1;case 1:return t<n.length?(i=n[t],[4,i]):[3,4];case 2:o.sent(),o.label=3;case 3:return t++,[3,1];case 4:return[2]}})}var o=this&&this.__decorate||function(e,t,n,i){var o,r=arguments.length,a=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(r<3?o(a):r>3?o(t,n,a):o(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a},r=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},a=this&&this.__generator||function(e,t){function n(e){return function(t){return i([e,t])}}function i(n){if(o)throw new TypeError("Generator is already executing.");for(;l;)try{if(o=1,r&&(a=r[2&n[0]?"return":n[0]?"throw":"next"])&&!(a=a.call(r,n[1])).done)return a;switch(r=0,a&&(n=[0,a.value]),n[0]){case 0:case 1:a=n;break;case 4:return l.label++,{value:n[1],done:!1};case 5:l.label++,r=n[1],n=[0];continue;case 7:n=l.ops.pop(),l.trys.pop();continue;default:if(a=l.trys,!(a=a.length>0&&a[a.length-1])&&(6===n[0]||2===n[0])){l=0;continue}if(3===n[0]&&(!a||n[1]>a[0]&&n[1]<a[3])){l.label=n[1];break}if(6===n[0]&&l.label<a[1]){l.label=a[1],a=n;break}if(a&&l.label<a[2]){l.label=a[2],l.ops.push(n);break}a[2]&&l.ops.pop(),l.trys.pop();continue}n=t.call(e,l)}catch(e){n=[6,e],r=0}finally{o=a=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}var o,r,a,s,l={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return s={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s};Object.defineProperty(t,"__esModule",{value:!0});var s=n("@angular/core"),l=n("../node_modules/fileapi/dist/FileAPI.js"),c=n("./models/fs-file.ts"),p={0:"imageInfo",1:"imageType",2:"imageQuality"},u=function(){function e(){this.select=new s.EventEmitter,this._options={disabled:!1,multiple:!1,preview:!1,accept:[],minSize:void 0,maxSize:void 0,imageMaxWidth:void 0,imageMaxHeight:void 0,imageQuality:void 0,imageFormat:void 0}}return Object.defineProperty(e.prototype,"multiple",{get:function(){return this._options.multiple},set:function(e){this._options.multiple="boolean"==typeof e?e:"true"===e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"accept",{get:function(){return this._options.accept.join(", ")||"*"},set:function(e){this._options.accept=this._options.accept.concat(e.split(","))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"minSize",{set:function(e){void 0!==e&&(this._options.minSize=e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"maxSize",{set:function(e){void 0!==e&&(this._options.maxSize=e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"imageMaxWidth",{set:function(e){
void 0!==e&&(this._options.imageMaxWidth=+e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"imageMaxHeight",{set:function(e){void 0!==e&&(this._options.imageMaxHeight=+e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"imageQuality",{set:function(e){var t=parseFloat(e);isNaN(t)||(this._options.imageQuality=t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"imageFormat",{set:function(e){["jpg","png"].indexOf(e)>-1&&(this._options.imageFormat=e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"disabled",{get:function(){return this._options.disabled},set:function(e){this._options.disabled=e},enumerable:!0,configurable:!0}),e.prototype.initForElement=function(e){this.el=e.nativeElement,this.onChanges()},e.prototype.initDragNDropForElement=function(e){this.containerEl=e.nativeElement,this.onDrop()},e.prototype.onChanges=function(){var e=this;l.event.on(this.el,"change",function(t){var n=l.getFiles(t);e.el.value=null,e.filterFiles(n).then(function(t){t.files&&t.files.length>0&&e.processFiles(t.files)})})},e.prototype.onDrop=function(){var e=this;l.event.on(this.containerEl,"drop",function(t){var n=l.getFiles(t);e.el.value=null,e.filterFiles(n).then(function(t){t.files&&t.files.length>0&&e.processFiles(t.files)})})},e.prototype.processFiles=function(e){var t=this;e=e.map(function(e){return new c.FsFile(e)}),this.select.next(this._options.multiple?e:e[0]);e.forEach(function(e){if(e.typeImage){var n=i(Object.keys(p));new Promise(function(i,o){t.applyProcessors(e,n,i,o)}).then(function(){},function(e){t.alertImageProcessingError(e.file)})}})},e.prototype.filterFiles=function(e){var t=this;return new Promise(function(n){l.filterFiles(e,function(e,n){var i=void 0;i=!e.typeImage||t.checkResolutionRule(n);var o=t.checkSize(e);return(void 0===i||i)&&o},function(e,t){n({files:e,rejected:t})})})},e.prototype.checkResolutionRule=function(e){return this._options.imageMaxWidth&&this._options.imageMaxHeight?e.width<=this._options.imageMaxWidth&&e.height<=this._options.imageMaxHeight:this._options.imageMaxWidth?e.width<=this._options.imageMaxWidth:!this._options.imageMaxHeight||e.height<=this._options.imageMaxHeight},e.prototype.checkSize=function(e){return(void 0===this._options.minSize||e.size>=this._options.minSize*l.KB)&&(void 0===this._options.maxSize||e.size<=this._options.maxSize*l.KB)},e.prototype.changeImageFormat=function(e){var t=this;return new Promise(function(n,i){var o=l.Image(e.file),r=t._options.imageFormat?"image/"+t._options.imageFormat:e.type;o.get(function(o,a){o?i(o):a.toDataUrl(function(t){e.file=new File([t],e.name,{type:r}),n(e)},r,t._options.imageQuality||1)})})},e.prototype.getImageInfo=function(e){return new Promise(function(t,n){l.getInfo(e.file,function(e,i){e?n(e):t(i)})})},e.prototype.changeQuality=function(e){var t=this;return new Promise(function(n,i){l.Image(e.file).get(function(o,r){o?i(o):r.toBlob(function(t){e.file=new File([t],e.name,{type:e.type}),n(e)},e.type,t._options.imageQuality||1)})})},e.prototype.applyProcessors=function(e,t,n,i){var o=this,r=t.next();if(r.done)e.progress=this._options.preview,n(e);else switch(e.progress=!0,+r.value){case 0:this.getImageInfo(e).then(function(r){e.parseInfo(r),o.applyProcessors(e,t,n,i)}).catch(function(t){i({error:t,file:e})});break;case 1:void 0!==this._options.imageQuality?this.changeQuality(e).then(function(e){o.applyProcessors(e,t,n,i)}).catch(function(t){i({error:t,file:e})}):this.applyProcessors(e,t,n,i);break;case 2:void 0!==this._options.imageFormat?this.changeImageFormat(e).then(function(e){o.applyProcessors(e,t,n,i)}).catch(function(t){i({error:t,file:e})}):this.applyProcessors(e,t,n,i)}},e.prototype.alertImageProcessingError=function(e){alert("File "+e.name+" can't be processed as image. File was rejected")},e=o([s.Injectable(),r("design:paramtypes",[])],e)}();t.FsFileService=u},"./services/index.ts":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}(n("./services/fs-file.service.ts"))},"@angular/common":function(e,n){e.exports=t},"@angular/core":function(t,n){t.exports=e},"@angular/material":function(e,t){e.exports=n}})});