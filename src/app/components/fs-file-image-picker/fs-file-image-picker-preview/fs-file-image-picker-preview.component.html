<div class="wrap" [ngClass]="{ disabled: !allowUpload }">

  <fs-file
    *ngIf="allowUpload"
    (select)="selectFile($event)"
    (error)="error.emit($event)"
    (clicked)="clicked.emit($event)"
    [minHeight]="minHeight"
    [minWidth]="minWidth"
    [imageWidth]="imageWidth"
    [imageHeight]="imageHeight"
    [imageQuality]="imageQuality"
    [disabled]="disabled"
    accept="image/*"
    multiple="false">

    <ng-container *ngTemplateOutlet="filePreview"></ng-container>
  </fs-file>

  <ng-container *ngIf="!allowUpload">
    <ng-container *ngTemplateOutlet="filePreview"></ng-container>
  </ng-container>
</div>

<ng-template #filePreview>
  <fs-file-preview
      [file]="file"
      [previewHeight]="previewDiameter"
      [previewWidth]="previewDiameter"
      class="image-preview">
    <div *ngIf="allowUpload" class="update-action" [ngStyle]="updateStyle"> {{file && file.exists ? 'Update' : 'Upload '}} </div>
  </fs-file-preview>
</ng-template>
