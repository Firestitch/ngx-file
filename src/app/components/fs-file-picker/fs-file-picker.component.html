<fs-label-field
    class="fs-form-wrapper"
    [ngClass]="{ 'percent-preview': previewPercent }">
  <ng-container *ngIf="label; else labelContent">
    <fs-label class="fs-form-label">{{label}}</fs-label>
  </ng-container>
  <ng-template #labelContent>
    <fs-label *ngIf="labels.length" class="fs-form-label">
      <ng-content select="[fsFileLabel]"></ng-content>
    </fs-label>
  </ng-template>
  <fs-file
      [accept]="accept"
      (select)="selectFile($event)"
      [imageWidth]="imageWidth"
      [imageHeight]="imageHeight"
      [imageQuality]="imageQuality"
      [disabled]="disabled"
      [multiple]="multiple">
    <div
        class="wrap"
        [style.width]="previewWidth"
        [style.height]="previewHeight">
      <fs-file-preview
          class="preview"
          *ngIf="file; else preview"
          (remove)="removeFile()"
          [file]="file"
          [showFilename]="showFilename"
          [previewHeight]="null"
          [previewWidth]="null">
        <ng-template
            fs-file-preview-action
            placement="top-right"
            action="remove"
            tooltip="Remove"
            *ngIf="allowRemove"
            (click)="actionClick($event)">
          <mat-icon>close</mat-icon>
        </ng-template>
        <ng-template
            fs-file-preview-action
            placement="bottom-right"
            tooltip="Reupload"
            *ngIf="allowReupload">
          <mat-icon>upload</mat-icon>
        </ng-template>
        <ng-template
            fs-file-preview-action
            placement="bottom-left"
            action="download"
            tooltip="Download"
            [hide]="!(allowDownload && ((download.observers.length && file) || file.url))"
            (click)="downloadClicked($event)">
          <a
              [href]="file.url"
              target="_blank"
              tabindex="-1"
              class="download">
            <mat-icon>download</mat-icon>
          </a>
        </ng-template>
      </fs-file-preview>

      <ng-template #preview>
        <ng-container *ngIf="filePickerSelectTemplate">
          <ng-container [ngTemplateOutlet]="filePickerSelectTemplate"></ng-container>
        </ng-container>
        <ng-container *ngIf="!filePickerSelectTemplate">
          <div class="select">
            <mat-icon>upload</mat-icon>
            <div class="instruction">{{instruction}}</div>
            <div class="mat-raised-button">Upload</div>
          </div>
        </ng-container>
      </ng-template>
    </div>
  </fs-file>
  <fs-label-message class="fs-form-message">
    <span class="fs-form-hint">
      <ng-content select="[fsFileHint]"></ng-content>
      <ng-content select="[fsFileMessageLabel]"></ng-content>
    </span>
  </fs-label-message>
</fs-label-field>
